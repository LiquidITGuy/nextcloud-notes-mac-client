"use strict";const Store=require("electron-store"),JsSearch=require("js-search"),Snowball=require("snowball"),sw=require("stopword"),removeMarkdown=require("remove-markdown"),$=require("jquery"),log=require("electron-log"),i18n=require("./i18n.min"),lang=i18n.language.substring(0,2),categories=require("./categories.min"),store=new Store,database=new Store({name:"database"});module.exports.searchNotes=function(e){let r,t=e.split(" "),a=database.get("notes"),n=(store.get("categories.selected"),[]),s=[];if(!0===store.get("appSettings.stopwords")){r=sw.removeStopwords(t,sw[checkStopwordLang(lang)]).join(" ")}else r=e;for(let e of a){e.content=removeMarkdown(e.content);let r=categories.sanitizeCategory(e.category);n.push({id:e.id,content:e.content,category:r,favorite:e.favorite})}let o=new JsSearch.Search("id");!0===store.get("appSettings.stemming")&&(o.tokenizer=new JsSearch.StemmingTokenizer(new Stem,new JsSearch.SimpleTokenizer)),o.addIndex("content"),o.addDocuments(n);let i=o.search(r);for(let e of i)s.push(e.id);searchResult(s,r)};let Stem=function(e){let r=new Snowball(checkStemmerLang(lang));return function(e){return r.setCurrent(e),r.stem(),r.getCurrent()}};function checkStopwordLang(e){return["af","ar","bn","br","da","de","es","fa","fi","fr","ha","he","hi","id","it","ja","nl","no","pl","pt","pa","ru","so","st","sv","sw","vi","yo","zh"].includes(e)?e:"en"}function checkStemmerLang(e){let r="english";switch(e){case"da":r="danish";break;case"nl":r="dutch";break;case"fi":r="finnish";break;case"fr":r="french";break;case"de":r="german";break;case"hu":r="hungarian";break;case"it":r="italian";break;case"no":r="norwegian";break;case"pt":r="portuguese";break;case"ru":r="russian";break;case"es":r="spanish";break;case"sv":r="swedish";break;case"ro":r="romanian";break;case"tr":r="turkish"}return r}function searchResult(e,r){$("#sidebar li").hide(),$("#result").html(r).show();for(let r of e)$(`#sidebar li[data-id='${r}']`).show()}
//# sourceMappingURL=maps/search.min.js.map
