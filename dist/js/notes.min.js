"use strict";const i18n=require("./i18n.min"),{ipcRenderer:ipcRenderer}=require("electron"),Store=require("electron-store"),store=new Store,$=require("jquery"),removeMarkdown=require("remove-markdown"),fetch=require("./fetch.min"),dates=require("./dates.min"),categories=require("./categories.min");function displayNote(e){if($("#edit").removeClass("editing"),$("#time").html(dates.titlebarDate(e.modified)),easymde&&(easymde.toTextArea(),easymde=null),easymde=new EasyMDE(editor.easymdeSetup),toggleSpellcheck(store.get("appSettings.spellcheck")),easymde.codemirror.on("mousedown",(function(e,t){if(3!==t.which);else{let e=easymde.codemirror.doc.getSelection();ipcRenderer.send("show-notes-menu",{selection:e,preview:!1})}})),$("#note").attr("data-id",e.id),easymde.value(e.content),easymde.codemirror.clearHistory(),easymde.togglePreview(),setCheckLists(),$("time").fadeIn("fast"),$(".loader").fadeOut(400,(function(){$(this).remove()})),!0===firstLoad){const e=require("./version.min");firstLoad=1,e.appVersion()}}module.exports={listNotes:function(e,t){null!==t&&database.set("notes",e);let a=store.get("appSettings.sortby"),r=store.get("appSettings.orderby"),s="",i=[];e.length>1&&e.sort((function(e,t){var s=e[a],i=t[a];return"asc"===r?s<i?-1:s>i?1:0:s>i?-1:s<i?1:0}));for(let t of e)s+=module.exports.addSidebarEntry(t),i.push(t.category);$("#sidebar").html(s),t?module.exports.getSelected("sidebar"):module.exports.getSelected(),categories.categoryList(i),categories.selectCategory(store.get("categories.selected"))},addSidebarEntry:function(e){let t=new Date(e.modified),a=dates.sidebarDate(t.getTime()),r=e.category?categories.sanitizeCategory(e.category):"##none##",s=e.category?e.category:i18n.t("app:categories.none","Uncategorised"),i=removeMarkdown(e.content.replace(/(!\[.*\]\(.*\)|<[^>]*>|>|<)/g,""));return i=i?i.substr(0,120).slice(e.title.length):i18n.t("app:sidebar.notext","No additional text"),`<li data-id="${e.id}">\n\t\t\t\t\t\t<button data-id="${e.id}" data-title="${e.title}" data-content="" data-catid="${r}" data-category="${e.category}" data-favorite="${e.favorite}">\n\t\t\t\t\t\t\t<span class="side-title">${e.title}</span>\n\t\t\t\t\t\t\t<span class="side-text">${a}&nbsp;&nbsp;<span class="excerpt">${i}</span></span>\n\t\t\t\t\t\t\t<span class="side-cat">${s}</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</li>`},getSelected:function(e){let t=store.get("appInterface.selected");t&&($(`button[data-id="${t}"]`).addClass("selected").parent().prev().children().addClass("above-selected"),e||fetch.apiCall("single",t,null,(function(e,t,a,r){fetchResult(e,t,a,r)})))},displayNote:function(e){}};
//# sourceMappingURL=maps/notes.min.js.map
