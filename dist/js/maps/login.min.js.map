{"version":3,"sources":["login.js"],"names":["i18n","require","remote","ipcRenderer","Store","store","log","$","jqueryI18next","init","window","onerror","error","url","line","send","attr","language","localize","server","get","username","password","closeModal","getCurrentWindow","close","val","on","event","message","__setTheme","document","ready","prop","click","cert","this","is","warn","info","set","submit","e","preventDefault","theserver"],"mappings":"AAAA,aAEA,MAAMA,KAAWC,QAAS,cACpBC,OAAYD,QAAS,YAAaC,QAClCC,YAACA,aAAgBF,QAAS,YAC1BG,MAAWH,QAAS,kBACpBI,MAAW,IAAID,MACfE,IAASL,QAAS,gBAClBM,EAAQN,QAAS,UACjBO,cAAiBP,QAAS,kBAGhCO,cAAcC,KAAKT,KAAMO,GAMzBG,OAAOC,QAAU,SAAUC,EAAOC,EAAKC,GAEtCX,YAAYY,KAAM,kBAAmB,CAACH,MAAAA,EAAOC,IAAAA,EAAKC,KAAAA,KAOnDP,EAAE,QAAQS,KAAK,OAAQhB,KAAKiB,UAC5BV,EAAE,UAAUW,WACZX,EAAE,SAASW,WACXX,EAAE,SAASW,WACXX,EAAE,sBAAsBW,WACxBX,EAAE,UAAUW,WAMZ,IAAKC,OAAWd,MAAMe,IAAK,2BACzBC,SAAYhB,MAAMe,IAAK,6BACvBE,SAAYjB,MAAMe,IAAK,6BAQzB,SAASG,aAEMrB,OAAOsB,mBACfC,QATHN,QAAWZ,EAAE,wBAAwBmB,IAAKP,QAgB9ChB,YAAYwB,GAAG,YAAa,CAACC,EAAOC,KAEnCC,eAKDvB,EAAEwB,UAAUC,OAAM,WAIbb,QAECE,UAAYC,UAEff,EAAE,WAAW0B,KAAK,YAAY,GAC9B1B,EAAE,WAAW0B,KAAK,YAAY,KAU/B1B,EAAE,WAAW0B,KAAK,YAAY,GAC9B1B,EAAE,WAAW0B,KAAK,YAAY,IAG/B1B,EAAE,kBAAkB0B,KAAK,UAAW5B,MAAMe,IAAI,8BAK9Cb,EAAE,kBAAkB2B,OAAM,WAEzB,IAAIC,EAAO5B,EAAE6B,MAAMC,GAAG,aAET,IAATF,EAEH7B,IAAIgC,KAAK,gCAIThC,IAAIiC,KAAK,2BAGVlC,MAAMmC,IAAI,4BAA6BL,MAMxC5B,EAAE,WAAW2B,OAAO,WAEnBX,gBAMDhB,EAAE,eAAekC,QAAQ,SAAUC,GAElCA,EAAEC,iBAEF,IAAIC,EAAYrC,EAAE,wBAAwBmB,MAE1CrB,MAAMmC,IAAK,0BAA2BI,GACtCzC,YAAYY,KAAM,YAAa6B,MAMhCrC,EAAE,WAAW2B,OAAO,WAEnB7B,MAAMmC,IAAK,mBAAoB,CAE9BrB,OAAQ,GACRE,SAAU,GACVC,SAAU,KAGXnB,YAAYY,KAAK,iBAAkB,UACnCQ","file":"../login.min.js","sourcesContent":["'use strict'\n\nconst i18n \t\t\t\t= require( './i18n.min' )\nconst remote \t\t\t= require( 'electron' ).remote\nconst {ipcRenderer} \t= require( 'electron' )\nconst Store \t\t\t= require( 'electron-store' )\nconst store \t\t\t= new Store()\nconst log\t\t\t\t= require( 'electron-log' )\nconst $ \t\t\t\t= require( 'jquery' )\nconst jqueryI18next \t= require( 'jquery-i18next' )\n\n\njqueryI18next.init(i18n, $)\n\n\n\n//note(dgmid): log exceptions\n\nwindow.onerror = function( error, url, line ) {\n\t\n\tipcRenderer.send( 'error-in-render', {error, url, line} )\n}\n\n\n\n//note(dgmid): set lang & localize strings\n\n$('html').attr('lang', i18n.language)\n$('header').localize()\n$('label').localize()\n$('input').localize()\n$('.cert-warning span').localize()\n$('button').localize()\n\n\n\n//note(dgmid): get login credentials\n\nlet \tserver \t\t= store.get( 'loginCredentials.server' ),\n\t\tusername \t= store.get( 'loginCredentials.username' ),\n\t\tpassword \t= store.get( 'loginCredentials.password' )\n\nif( server ) { $('input[name=\"server\"]').val( server ) }\n\n\n\n//note(dgmid): close modal\n\nfunction closeModal() {\n\t\n\tconst modal = remote.getCurrentWindow()\n\tmodal.close()\n}\n\n\n\n//note(dgmid): update-theme\n\nipcRenderer.on('set-theme', (event, message) => {\n\t\n\t__setTheme()\n})\n\n\n\n$(document).ready(function() {\t\n\t\n\t//note(dgmid): set button states\n\t\n\tif( server ) {\n\t\t\n\t\tif( username && password ) {\n\t\t\t\n\t\t\t$('#update').prop('disabled', true)\n\t\t\t$('#logout').prop('disabled', false)\n\t\t\n\t\t} else {\n\t\t\t\n\t\t\t$('#update').prop('disabled', false)\n\t\t\t$('#logout').prop('disabled', true)\n\t\t}\n\t\t\n\t} else {\n\t\t\n\t\t$('#update').prop('disabled', false)\n\t\t$('#logout').prop('disabled', true)\n\t}\n\t\n\t$('#nocertificate').prop('checked', store.get('appSettings.nocertificate'))\n\t\n\t\n\t//note(dgmid): no certificate\n\t\n\t$('#nocertificate').click(function() {\n\t\t\n\t\tlet cert = $(this).is(':checked')\n\t\t\n\t\tif( cert === true ) {\n\t\t\t\n\t\t\tlog.warn(`allowing unsecure connection`)\n\t\t\n\t\t} else {\n\t\t\t\n\t\t\tlog.info(`using secure connection`)\n\t\t}\n\t\t\n\t\tstore.set('appSettings.nocertificate', cert)\n\t})\n\t\n\t\n\t//note(dgmid): cancel modal\n\t\n\t$('#cancel').click( function() {\n\t\t\n\t\tcloseModal()\n\t})\n\t\n\t\n\t//note(dgmid): update data\n\t\n\t$('#modal-form').submit( function( e ) {\n\t\t\n\t\te.preventDefault()\n\t\t\n\t\tlet theserver = $('input[name=\"server\"]').val()\n\t\t\n\t\tstore.set( 'loginCredentials.server', theserver )\n\t\tipcRenderer.send( 'loginflow', theserver )\n\t})\n\t\n\t\n\t//note(dgmid): logout\n\t\n\t$('#logout').click( function() {\n\t\t\n\t\tstore.set( 'loginCredentials', {\n\t\t\t\n\t\t\tserver: '',\n\t\t\tusername: '',\n\t\t\tpassword: ''\n\t\t})\n\t\t\n\t\tipcRenderer.send('reload-sidebar', 'logout')\n\t\tcloseModal()\n\t})\n})\n"]}