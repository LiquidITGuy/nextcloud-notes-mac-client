{"version":3,"sources":["app.js"],"names":["i18n","require","ipcRenderer","shell","remote","path","Store","store","dialog","$","marked","removeMarkdown","pretty","fs","EasyMDE","hljs","entities","AllHtmlEntities","log","fetch","dates","easymde","modal","server","get","username","password","database","name","notes","easymdeSetup","element","autoDownloadFontAwesome","autofocus","forceSync","status","spellChecker","toolbar","action","toggleHeadingSmaller","className","title","t","toggleBold","toggleItalic","toggleStrikethrough","toggleUnorderedList","toggleOrderedList","e","codemirror","replaceSelection","focus","drawLink","drawImage","toggleCodeBlock","toggleBlockquote","drawTable","drawHorizontalRule","shortcuts","cleanBlock","toggleSideBySide","toggleFullScreen","togglePreview","renderingConfig","codeSyntaxHighlighting","firstLoad","fetchResult","call","id","body","set","apiCall","removeData","attr","favorite","resetEditor","html","exportNote","listNotes","displayNote","setValue","value","insertTextAtCursor","text","note","getDoc","cursor","getCursor","replaceRange","wrapTextToSelection","start","end","selection","getSelection","wrapBlockToCursor","line","setCursor","saveCategories","array","compressed","copy","slice","orderby","results","empty","addClass","i","length","theCount","w","a","Object","count","push","sort","x","y","itemX","itemY","item","theItem","theID","split","join","showcount","catID","append","showHideCategoryIcons","hasClass","removeClass","sidebar","sortby","noteList","allCats","addSidebarEntry","category","getSelected","selectCategory","theDate","Date","modified","formattedDate","sidebarDate","getTime","catClass","theCat","plainTxt","content","replace","substr","titlebarDate","toTextArea","toggleSpellcheck","on","instance","event","which","doc","send","preview","clearHistory","setCheckLists","fadeIn","fadeOut","this","remove","checkAppVersion","selected","parent","prev","children","editNote","isPreviewActive","initCheckboxes","lineCount","historySize","undo","showMessageBoxSync","getCurrentWindow","message","detail","buttons","Math","floor","now","off","stopPropagation","preventDefault","toggleEditorCheckboxes","index","parents","getLineHandle","newvalue","ch","indexOf","execCommand","saveNote","exportPath","showSaveDialog","defaultPath","buttonLabel","properties","filters","extensions","then","data","canceled","filename","exported","filetype","pop","language","ocd","outputFile","readFile","Notification","catch","err","error","runExportProcess","filePath","deleteCheck","applyZoom","level","css","font-size","state","toggleCategories","toggleClass","openModal","url","width","height","resize","BrowserWindow","minWidth","maxWidth","minHeight","resizable","show","frame","transparent","vibrancy","webPreferences","devTools","preload","__dirname","nodeIntegration","loadURL","once","catid","hide","version","app","getVersion","compareVersions","getJSON","release","latest","info","compare","includes","done","fail","jqXHR","textStatus","errorThrown","always","window","onerror","__setTheme","cats","icons","close","toggleHeading1","toggleHeading2","toggleHeading3","toggleHeading4","toggleHeading5","toggleHeading6","zoom","parseInt","find","encoded","encode","decoded","decode","document","openExternal","href","addEventListener","items","blur","prevAll","first","click","nextAll","link","ready"],"mappings":"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","file":"../app.min.js","sourcesContent":["'use strict'\n\nconst i18n = require( './i18n.min' )\n\nconst { ipcRenderer, shell, remote } = require( 'electron' )\nconst path\t\t\t\t= require( 'path' )\nconst Store\t\t\t\t= require( 'electron-store' )\nconst store\t\t\t\t= new Store()\nconst dialog\t\t\t= remote.dialog\nconst $\t\t\t\t\t= require( 'jquery' )\nconst marked\t\t\t= require( 'marked' )\nconst removeMarkdown\t= require( 'remove-markdown' )\nconst pretty\t\t\t= require( 'pretty' )\nconst fs\t\t\t\t= require( 'fs-extra' )\nconst EasyMDE\t\t\t= require( 'easymde' )\nconst hljs\t\t\t\t= require( 'highlight.js' )\nconst entities\t\t\t= require( 'html-entities' ).AllHtmlEntities\nconst log\t\t\t\t= require( 'electron-log' )\n\nconst fetch\t\t\t\t= require( './fetch.min' )\nconst dates\t\t\t\t= require( './dates.min' )\n\nlet \tserver \t\t= store.get( 'loginCredentials.server' ),\n\t\tusername \t= store.get( 'loginCredentials.username' ),\n\t\tpassword \t= store.get( 'loginCredentials.password' )\n\nlet database = new Store({\n\tname: 'database',\n\tnotes: {}\n})\n\nlet easymdeSetup = {\n\t\t\n\t\telement: $('#note')[0],\n\t\tautoDownloadFontAwesome: false,\n\t\tautofocus: false,\n\t\tforceSync: true,\n\t\tstatus: false,\n\t\tspellChecker: true,\n\t\ttoolbar: [\t\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"Heading\",\n\t\t\t\t\t\taction: EasyMDE.toggleHeadingSmaller,\n\t\t\t\t\t\tclassName: \"icon-heading\",\n\t\t\t\t\t\ttitle: i18n.t('app:toolbar.heading', 'Heading'),\n\t\t\t\t\t},\n\t\t\t\t\t'|',\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"bold\",\n\t\t\t\t\t\taction: EasyMDE.toggleBold,\n\t\t\t\t\t\tclassName: \"icon-b\",\n\t\t\t\t\t\ttitle: i18n.t('app:toolbar.bold', 'Bold'),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"italic\",\n\t\t\t\t\t\taction: EasyMDE.toggleItalic,\n\t\t\t\t\t\tclassName: \"icon-i\",\n\t\t\t\t\t\ttitle: i18n.t('app:toolbar.italic', 'Italic'),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"srtikethrough\",\n\t\t\t\t\t\taction: EasyMDE.toggleStrikethrough,\n\t\t\t\t\t\tclassName: \"icon-del\",\n\t\t\t\t\t\ttitle: i18n.t('app:toolbar.strikethrough', 'Strikethrough'),\n\t\t\t\t\t},\n\t\t\t\t\t'|',\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"unordered-list\",\n\t\t\t\t\t\taction: EasyMDE.toggleUnorderedList,\n\t\t\t\t\t\tclassName: \"icon-ul\",\n\t\t\t\t\t\ttitle: i18n.t('app:toolbar.ul', 'Generic List'),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"ordered-list\",\n\t\t\t\t\t\taction: EasyMDE.toggleOrderedList,\n\t\t\t\t\t\tclassName: \"icon-ol\",\n\t\t\t\t\t\ttitle: i18n.t('app:toolbar.ol', 'Numbered List'),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"checklist\",\n\t\t\t\t\t\taction: (e) => {\n\t\t\t\t\t\t\te.codemirror.replaceSelection('- [ ] ')\n\t\t\t\t\t\t\te.codemirror.focus()\n\t\t\t\t\t\t},\n\t\t\t\t\t\tclassName: \"icon-checklist\",\n\t\t\t\t\t\ttitle: i18n.t('app:toolbar.checklist', 'Checkbox list (Shift-Cmd-Alt-L)'),\n\t\t\t\t\t},\n\t\t\t\t\t'|',\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"link\",\n\t\t\t\t\t\taction: EasyMDE.drawLink,\n\t\t\t\t\t\tclassName: \"icon-a\",\n\t\t\t\t\t\ttitle: i18n.t('app:toolbar.link', 'Create Link'),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"image\",\n\t\t\t\t\t\taction: EasyMDE.drawImage,\n\t\t\t\t\t\tclassName: \"icon-img\",\n\t\t\t\t\t\ttitle: i18n.t('app:toolbar.image', 'Insert Image'),\n\t\t\t\t\t},\n\t\t\t\t\t'|',\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"code\",\n\t\t\t\t\t\taction: EasyMDE.toggleCodeBlock,\n\t\t\t\t\t\tclassName: \"icon-code\",\n\t\t\t\t\t\ttitle: i18n.t('app:toolbar.code', 'Code'),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"quote\",\n\t\t\t\t\t\taction: EasyMDE.toggleBlockquote,\n\t\t\t\t\t\tclassName: \"icon-blockquote\",\n\t\t\t\t\t\ttitle: i18n.t('app:toolbar.quote', 'Quote'),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"table\",\n\t\t\t\t\t\taction: EasyMDE.drawTable,\n\t\t\t\t\t\tclassName: \"icon-table\",\n\t\t\t\t\t\ttitle: i18n.t('app:toolbar.table', 'Insert Table'),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"horizontal-rule\",\n\t\t\t\t\t\taction: EasyMDE.drawHorizontalRule,\n\t\t\t\t\t\tclassName: \"icon-hr\",\n\t\t\t\t\t\ttitle: i18n.t('app:toolbar.hr', 'Insert Horizontal Line'),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\tshortcuts: {\n\t\t\t'toggleStrikethrough': 'Shift-Cmd-D',\n\t\t\t'toggleBlockquote': 'Cmd-\\'',\n\t\t\t'drawTable': 'Cmd-T',\n\t\t\t'drawHorizontalRule': 'Cmd--',\n\t\t\t'cleanBlock': null,\n\t\t\t'toggleSideBySide': null,\n\t\t\t'toggleFullScreen': null,\n\t\t\t'togglePreview': null\t\n\t\t},\n\t\trenderingConfig: {\n\t\t\tcodeSyntaxHighlighting: true,\n\t\t\thljs: hljs\n\t\t}\n\t}\n\nlet easymde,\n\tmodal,\n\tfirstLoad = true\n\neasymde = new EasyMDE( easymdeSetup )\n\n\n\n//note(dgmid): log exceptions\n\nwindow.onerror = function( error, url, line ) {\n\t\n\tipcRenderer.send( 'error-in-render', {error, url, line} )\n}\n\n\n\nfunction  fetchResult( call, id, body, notes ) {\n\t\n\tswitch( call ) {\n\t\t\t\n\t\tcase 'new': // create new note\n\t\t\t\n\t\t\tstore.set('appInterface.selected', notes.id)\n\t\t\tfetch.apiCall( 'all', null, null, function( call, id, body, notes ) {\n\t\t\t\t\n\t\t\t\tfetchResult( call, id, body, notes )\n\t\t\t})\n\t\t\t\n\t\tbreak\n\t\t\n\t\tcase 'save': // save note\n\t\t\t\n\t\t\tfetch.apiCall( 'sidebar', null, null, function( call, id, body, notes ) {\n\t\t\t\t\n\t\t\t\tfetchResult( call, id, body, notes )\n\t\t\t})\n\t\t\t\n\t\tbreak\n\t\t\n\t\tcase 'update': // modify existing note\n\t\t\t\n\t\t\t$(`button[data-id=\"${id}\"]`).removeData('favorite')\n\t\t\t$(`button[data-id=\"${id}\"]`).attr('data-favorite', body.favorite)\n\t\t\n\t\tbreak\n\t\t\n\t\tcase 'category':\n\t\t\n\t\t\tfetch.apiCall( 'sidebar', null, null, function( call, id, body, notes ) {\n\t\t\t\t\n\t\t\t\tfetchResult( call, id, body, notes )\n\t\t\t})\n\t\t\t\n\t\tbreak\n\t\t\n\t\tcase 'delete': // delete note\n\t\t\t\n\t\t\tlet selected = $('#sidebar li button.selected').attr('data-id')\n\t\t\t\n\t\t\tif( selected == id) {\n\t\t\t\t\n\t\t\t\tresetEditor()\n\t\t\t\t\n\t\t\t\tstore.set( 'appInterface.selected', null )\n\t\t\t\t$('#note').attr('data-id', null)\n\t\t\t\t$('#time, #note').html('')\n\t\t\t}\n\t\t\t\n\t\t\tfetch.apiCall( 'all', null, null, function( call, id, body, notes ) {\n\t\t\t\t\n\t\t\t\tfetchResult( call, id, body, notes )\n\t\t\t})\n\t\t\n\t\tbreak\n\t\t\n\t\tcase 'export':\n\t\t\t\n\t\t\texportNote( notes )\n\t\t\t\n\t\tbreak\n\t\t\n\t\tcase 'sidebar':\n\t\t\t\n\t\t\tlistNotes( notes, 'sidebar' )\n\t\t\t\n\t\tbreak\n\t\t\n\t\tdefault: // get single note or all notes\n\t\t\t\n\t\t\t(id) ? displayNote( notes ) : listNotes( notes )\n\t}\n}\n\n\n\n//note reset editor\n\nfunction resetEditor() {\n\t\n\teasymde.codemirror.setValue('')\n\teasymde.value('')\n\t$('.editor-preview').html('')\n}\n\n\n\n//note(dgmid): codeMirror - insert / wrap text\n\nfunction insertTextAtCursor( text ) {\n\t\n\tlet note = easymde.codemirror.getDoc()\n\tlet cursor = note.getCursor()\n\tnote.replaceRange(text, cursor)\n}\n\nfunction wrapTextToSelection( start, end ) {\n\t\n\tlet note = easymde.codemirror.getDoc()\n\tlet selection = note.getSelection()\n\tnote.replaceSelection( start + selection + end )\n}\n\nfunction wrapBlockToCursor( start, end ) {\n\t\n\tlet note = easymde.codemirror.getDoc()\n\tlet cursor = note.getCursor()\n\tnote.replaceRange(\n`${start}\n\n${end}`, cursor)\n\t\n\tcursor = note.getCursor()\n\tlet line = cursor.line -1\n\tnote.setCursor({ line: line })\n}\n\n\n\n//note(dgmid): build category list\n\nfunction saveCategories( array ) {\n\t\n\tlet compressed = [],\n\tcopy = array.slice(0),\n\torderby = store.get( 'appSettings.ordercats' ),\n\tresults = []\n\t\n\tif( orderby == null ) orderby = 'asc'\n\t\n\t$('#categories').empty().addClass( orderby )\n\t\n\tfor (var i = 0; i < array.length; i++) {\n\t\n\t\tvar theCount = 0\n\t\t\n\t\tfor (var w = 0; w < copy.length; w++) {\n\t\t\t\n\t\t\tif (array[i] == copy[w]) {\n\t\t\t\t\n\t\t\t\ttheCount++\n\t\t\t\tdelete copy[w]\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (theCount > 0) {\n\t\t\t\n\t\t\tvar a = new Object()\n\t\t\ta.value = array[i]\n\t\t\ta.count = theCount\n\t\t\tcompressed.push(a)\n\t\t}\n\t}\n\t\n\tif( compressed.length > 1 ) {\n\t\t\n\t\tcompressed.sort(function(x, y) {\n\t\t\t\n\t\t\tvar itemX = x['value']\n\t\t\tvar itemY = y['value']\n\t\t\t\n\t\t\treturn (itemX < itemY) ? -1 : (itemX > itemY) ? 1 : 0\n\t\t})\n\t}\n\t\n\tfor ( let item of compressed ) {\n\t\t\n\t\tlet theItem\t\t= item.value,\n\t\t\ttheCount\t= item.count,\n\t\t\ttheID \t\t= theItem.split(' ').join('_'),\n\t\t\tshowcount\t= (store.get( 'appSettings.catcount' )) ? ' show' : ''\n\t\t\n\t\tif( theItem.length > 0 ) {\n\t\t\n\t\t\tresults.push( {\n\t\t\t\t\"item\": theItem ,\n\t\t\t\t\"catID\": theID,\n\t\t\t\t\"count\": theCount\n\t\t\t} )\n\t\t\t\n\t\t\t$('#categories').append(`<li><button class=\"custom\" data-catid=\"${theID}\" data-category=\"${theItem}\" title=\"${theItem}\"><span class=\"cat-name\">${theItem}</span><span class=\"cat-count${showcount}\">${theCount}</span></button></li>`)\n\t\t}\n\t}\n\t\n\t$(`.categories button[data-catid=\"${store.get('categories.selected')}\"]`).addClass( 'selected' )\n\t\n\tshowHideCategoryIcons()\n\tstore.set( 'categories.list', results )\n}\n\n\n\n//note(dgmid): hide category icons when a custom category is selected\n\nfunction showHideCategoryIcons() {\n\t\n\tif( $('.categories button.selected').hasClass( 'custom' ) ) {\n\t\t\n\t\t$('#sidebar').addClass( 'hidecats' )\n\t\t\n\t} else {\n\t\t\n\t\t$('#sidebar').removeClass( 'hidecats' )\n\t}\n}\n\n\n\n//note(dgmid): generate ordered sidebar entries\n\nfunction listNotes( array, sidebar ) {\n\t\n\tif( sidebar !== null ) database.set('notes', array)\n\t\n\tlet sortby \t= store.get( 'appSettings.sortby' ),\n\t\torderby = store.get( 'appSettings.orderby' ),\n\t\tnoteList = '',\n\t\tallCats = []\n\t\n\tif( array.length > 1 ) {\n\t\t\n\t\tarray.sort(function(x, y) {\n\t\t\t\n\t\t\tvar itemX = x[sortby]\n\t\t\tvar itemY = y[sortby]\n\t\t\t\n\t\t\tif( orderby === 'asc' ) {\n\t\t\t\t\n\t\t\t\treturn (itemX < itemY) ? -1 : (itemX > itemY) ? 1 : 0\n\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\treturn (itemX > itemY) ? -1 : (itemX < itemY) ? 1 : 0\n\t\t\t}\n\t\t})\n\t}\n\t\n\tfor ( let item of array ) {\n\t\t\n\t\tnoteList += addSidebarEntry( item )\n\t\tallCats.push( item.category )\n\t}\n\t\n\t$('#sidebar').html( noteList )\n\t\n\tif( sidebar ) {\n\t\t\n\t\tgetSelected( 'sidebar' )\n\t\n\t} else {\n\t\t\n\t\tgetSelected()\n\t}\n\t\n\tsaveCategories( allCats )\n\tselectCategory( store.get('categories.selected') )\n}\n\n\n\n//note(dgmid): add sidebar entry\n\nfunction addSidebarEntry( item ) {\n\t\n\tlet theDate = new Date( item.modified ),\n\t\tformattedDate = dates.sidebarDate( theDate.getTime() )\n\t\n\tlet\tcatClass = ( item.category ) ? item.category.split(' ').join('_') : '##none##'\n\t\n\tlet\ttheCat = ( item.category ) ? item.category : i18n.t('app:categories.none', 'Uncategorised')\n\t\n\tlet plainTxt = removeMarkdown( item.content.replace(/(!\\[.*\\]\\(.*\\)|<[^>]*>|>|<)/g, ''))\n\t\n\tif( plainTxt ) {\n\n\t\tplainTxt = plainTxt.substr(0, 120).slice(item.title.length)\n\t\t\n\t} else {\n\t\t\n\t\tplainTxt = i18n.t('app:sidebar.notext', 'No additional text')\n\t}\n\t\n\tlet entry = `<li data-id=\"${item.id}\">\n\t\t\t\t\t<button data-id=\"${item.id}\" data-title=\"${item.title}\" data-content=\"\" data-catid=\"${catClass}\" data-category=\"${item.category}\" data-favorite=\"${item.favorite}\">\n\t\t\t\t\t\t<span class=\"side-title\">${item.title}</span>\n\t\t\t\t\t\t<span class=\"side-text\">${formattedDate}&nbsp;&nbsp;<span class=\"excerpt\">${plainTxt}</span></span>\n\t\t\t\t\t\t<span class=\"side-cat\">${theCat}</span>\n\t\t\t\t\t</button>\n\t\t\t\t</li>`\n\t\n\treturn entry\n}\n\n\n\n//note(dgmid): display single note\n\nfunction displayNote( note ) {\n\t\n\t$('#edit').removeClass('editing')\n\t\n\t$('#time').html( dates.titlebarDate( note.modified ) )\n\t\n\tif( easymde ) {\n\t\t\n\t\teasymde.toTextArea()\n\t\teasymde = null\n\t}\n\t\n\teasymde = new EasyMDE( easymdeSetup )\n\ttoggleSpellcheck( store.get('appSettings.spellcheck') )\t\n\t\n\t// register right click for notes menu\n\t\n\teasymde.codemirror.on( 'mousedown', function( instance, event ) {\n\t\t\n\t\tif( event.which === 3 ) {\n\t\t\t\n\t\t\tlet selection = easymde.codemirror.doc.getSelection()\n\t\t\t\n\t\t\tipcRenderer.send('show-notes-menu',\n\t\t\t\t{\n\t\t\t\t\tselection: selection,\n\t\t\t\t\tpreview: false\n\t\t\t\t}\n\t\t\t)\n\t\t\treturn\n\t\t}\n\t})\n\t\n\t$('#note').attr('data-id', note.id)\n\teasymde.value( note.content )\n\teasymde.codemirror.clearHistory()\n\teasymde.togglePreview()\n\tsetCheckLists()\n\t\n\t$('time').fadeIn('fast')\n\t$('.loader').fadeOut(400, function() { $(this).remove() } )\n\t\n\tif( firstLoad === true ) {\n\t\t\n\t\tfirstLoad = 1\n\t\tcheckAppVersion()\n\t}\n}\n\n\n\n//note(dgmid): get selected note\n\nfunction getSelected( sidebar ) {\n\t\n\tlet selected = store.get( 'appInterface.selected' )\n\t\n\tif( selected ) {\n\t\t\n\t\t$(`button[data-id=\"${selected}\"]`).addClass('selected').parent().prev().children().addClass('above-selected')\n\t\t\n\t\tif( !sidebar ) {\n\t\t\t\n\t\t\tfetch.apiCall( 'single', selected, null, function( call, id, body, notes ) {\n\t\t\t\t\n\t\t\t\tfetchResult( call, id, body, notes )\n\t\t\t})\n\t\t}\n\t}\n}\n\n\n\n//note(dgmid): edit note\n\nfunction editNote() {\n\t\n\tlet selected = store.get( 'appInterface.selected' )\n\t\t\n\tif( selected ) {\n\t\t\n\t\tif( easymde.isPreviewActive() ) {\n\t\t\n\t\t\t$('#edit').attr('title', i18n.t('app:main.button.save', 'Save Note')).addClass('editing')\n\t\t\teasymde.togglePreview()\n\t\t\teasymde.codemirror.focus()\n\t\t\tinitCheckboxes()\n\t\t\teasymde.codemirror.on(\"changes\", initCheckboxes)\n\t\t\t\n\t\t\t\n\t\t\tif( store.get('appSettings.cursor') == 'end' ) {\n\t\t\t\t\n\t\t\t\teasymde.codemirror.setCursor(easymde.codemirror.lineCount(), 0)\n\t\t\t}\n\t\t\n\t\t} else {\n\t\t\t\n\t\t\tif( easymde.codemirror.historySize().undo > 0 ) {\n\t\t\t\n\t\t\t\tlet response = dialog.showMessageBoxSync(remote.getCurrentWindow(), {\n\t\t\t\t\t\t\t\tmessage: i18n.t('app:dialog.save.title', 'You have made changes to this note'),\n\t\t\t\t\t\t\t\tdetail: i18n.t('app:dialog.save.text', 'Do you want to save them?'),\n\t\t\t\t\t\t\t\tbuttons: [i18n.t('app:dialog.button.savechanges', 'Save changes'), i18n.t('app:dialog.button.cancel', 'Cancel')]\n\t\t\t\t\t\t\t})\n\t\t\t\t\n\t\t\t\tif( response === 0 ) {\n\t\t\t\t\t\n\t\t\t\t\tlet body = {\t\n\t\t\t\t\t\t\"content\": easymde.value(),\n\t\t\t\t\t\t\"modified\": Math.floor(Date.now() / 1000)\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\teasymde.codemirror.clearHistory()\n\t\t\t\t\t\n\t\t\t\t\tfetch.apiCall( 'save', selected, body, function( call, id, body, notes ) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tfetchResult( call, id, body, notes )\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\n\t\t\t\t\twhile ( easymde.codemirror.historySize().undo > 0) easymde.codemirror.undo()\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\teasymde.togglePreview()\n\t\t\t$('#edit').attr('title', i18n.t('app:main.button.edit', 'Edit Note')).removeClass('editing').focus()\n\t\t\tsetCheckLists()\n\t\t}\n\t}\n}\n\n\n\n//editor checkboxes - based on https://github.com/nextcloud/notes/issues/117\n\n//note(dgmid): init checkboxes\n\nfunction initCheckboxes() {\n\t\n\t$('.cm-formatting-task').off('click.toggleEditorCheckboxes').on('click.toggleEditorCheckboxes', function (event) {\n\t\t\n\t\t$('.cm-formatting-task').off('click.toggle_checkbox')\n\t\t\n\t\tevent.stopPropagation()\n\t\tevent.preventDefault()\n\t\ttoggleEditorCheckboxes( $(this) )\n\t})\n}\n\n\n//note(dgmid): toggle checkbox state\n\nfunction toggleEditorCheckboxes( element ) {\n\t\n\tlet doc \t= easymde.codemirror.getDoc(),\n\t\tindex \t= element.parents( '.CodeMirror-line' ).index(),\n\t\tline \t= doc.getLineHandle( index )\n\t\n\tlet newvalue = ( element.text() == '[x]' ) ? '[ ]' : '[x]'\n\t\n\tdoc.replaceRange(\n\t\tnewvalue,\n\t\t{\n\t\t\tline: index,\n\t\t\tch: line.text.indexOf( '[' )\n\t\t},\n\t\t{\n\t\t\tline: index,\n\t\t\tch: line.text.indexOf( ']' ) + 1\n\t\t}\n\t)\n\n\teasymde.codemirror.execCommand( 'goLineEnd' )\n}\n\n\n\n//note(dgmid): save note\n\nfunction saveNote( id ) {\n\t\n\tif(\t!easymde.isPreviewActive() && easymde.codemirror.historySize().undo > 0 ) {\n\t\t\n\t\tlet body = {\n\t\t\t\"content\": easymde.value(),\n\t\t\t\"modified\": Math.floor(Date.now() / 1000)\n\t\t}\n\t\t\t\t\t\n\t\teasymde.codemirror.clearHistory()\n\t\t\n\t\tfetch.apiCall( 'save', id, body, function( call, id, body, notes ) {\n\t\t\t\n\t\t\tfetchResult( call, id, body, notes )\n\t\t})\n\t\t\n\t\t\n\t}\n}\n\n\n\n//note(dgmid): export note\n\nfunction exportNote( note ) {\n\t\n\tconst exportPath = store.get('exportPath')\n\t\n\tdialog.showSaveDialog(remote.getCurrentWindow(), {\n\t\t\t\n\t\tdefaultPath: `${exportPath}/${note.title}`,\n\t\tbuttonLabel: i18n.t('app:dialog.button.export', 'Export Note'),\n\t\tproperties: [\t'openDirectory',\n\t\t\t\t\t\t'createDirectory'\n\t\t\t\t\t],\n\t\tfilters: [\n\t\t\t\t{\tname:\t\ti18n.t('app:dialog.format.html', 'html'),\n\t\t\t\t\textensions:\t['html']\n\t\t\t\t},\n\t\t\t\t{\tname:\t\ti18n.t('app:dialog.format.md', 'markdown'),\n\t\t\t\t\textensions:\t['md']\n\t\t\t\t},\n\t\t\t\t{\tname:\t\ti18n.t('app:dialog.format.txt', 'text'),\n\t\t\t\t\textensions:\t['txt']\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t).then((data) =>{\n\t\t\n\t\tif( data.canceled === false ) {\n\t\t\t\n\t\t\trunExportProcess( data.filePath )\n\t\t}\n\t})\n\t\n\tfunction runExportProcess( filename ) {\n\t\t\n\t\tlet exported,\n\t\t\tfiletype\n\t\t\n\t\tswitch( filename.split('.').pop() ) {\n\t\t\t\n\t\t\tcase 'html':\n\t\t\t\t\n\t\t\t\tlet html = marked( note.content )\n\t\t\t\t\n\t\t\t\texported = pretty( `<!doctype html><html lang=\"${i18n.language}\"><head><meta charset=\"utf-8\" /><title>${note.title}</title></head><body>${html}</body></html>`, {ocd: true} )\n\t\t\t\t\n\t\t\t\tfiletype = 'html'\n\t\t\t\t\n\t\t\tbreak\n\t\t\t\n\t\t\tcase 'txt':\n\t\t\t\t\n\t\t\t\texported = removeMarkdown( note.content )\n\t\t\t\tfiletype = 'text'\n\t\t\t\n\t\t\tbreak\n\t\t\t\n\t\t\tdefault: //markdown\n\t\t\t\t\n\t\t\t\texported = note.content\n\t\t\t\tfiletype = 'markdown'\n\t\t}\n\t\t\n\t\tfs.outputFile(filename, exported)\n\t\t.then(() => fs.readFile(filename, 'utf8'))\n\t\t.then((data) => {\n\t\t\t\n\t\t\tlet exportNotification = new Notification('Nextcloud Notes Client', {\n\t\t\t\t\n\t\t\t\tbody: i18n.t('app:notification.export.text', 'The note {{title}} has been exported as {{filetype}}', {title: note.title, filetype: filetype})\n\t\t\t})\n\t\t})\n\t\t\n\t\t.catch(err => {\n\t\t\t\n\t\t\tlog.error( err )\n\t\t})\n\t}\n}\n\n\n\n//note(dgmid): delete check\n\nfunction deleteCheck( id ) {\n\t\n\tlet response = dialog.showMessageBoxSync(remote.getCurrentWindow(), {\n\t\t\t\t\t\t\tmessage: i18n.t('app:dialog.delete.title', 'Are you sure you want to delete this note?'),\n\t\t\t\t\t\t\tdetail: i18n.t('app:dialog.delete.text', 'This operation is not reversable.'),\n\t\t\t\t\t\t\tbuttons: [i18n.t('app:dialog.button.delete', 'Delete Note'), i18n.t('app:dialog.button.cancel', 'Cancel')]\n\t\t\t\t\t\t})\n\t\t\n\tif( response === 0 ) {\n\t\t\n\t\tfetch.apiCall( 'delete', id, null, function( call, id, body, notes ) {\n\t\t\t\n\t\t\tfetchResult( call, id, body, notes )\n\t\t})\n\t}\n}\n\n\n\n//note(dgmid): apply zoom level\n\nfunction applyZoom( level ) {\n\t\n\t$('.editor-preview').css({ \"font-size\": `${level/10}rem` })\n}\n\n\n\n//note(dgmid): toggle spellcheck\n\nfunction toggleSpellcheck( state ) {\n\t\n\t( state ) ? $('.CodeMirror').addClass('spellcheck') : $('.CodeMirror').removeClass('spellcheck')\n}\n\n\n\n//note(dgmid): show / hide categories\n\nfunction toggleCategories( state ) {\n\t\n\t$('#sidebar').toggleClass( 'showcats' )\n}\n\n\n\n//note(dgmid): set zoom slider\n\nipcRenderer.on('set-zoom-slider', (event, message) => {\n\t\n\tapplyZoom( message )\n})\n\n\n\n//note(dgmid): reload sidebar\n\nipcRenderer.on('reload-sidebar', (event, message) => {\n\t\n\tif( message === 'login' ) {\n\t\t\n\t\tserver \t\t= store.get( 'loginCredentials.server' ),\n\t\tusername \t= store.get( 'loginCredentials.username' ),\n\t\tpassword \t= store.get( 'loginCredentials.password' )\n\t\t\n\t\tlog.info( `${message} completed` )\n\t\t\n\t\tfetch.apiCall( 'all', null, null, function( call, id, body, notes ) {\n\t\t\t\n\t\t\tfetchResult( call, id, body, notes )\n\t\t})\n\t\n\t} else if( message === 'logout' ) {\n\t\t\n\t\tserver = username = password = null\n\t\t\n\t\tresetEditor()\n\t\t$('#sidebar, #categories').empty()\n\t\n\t} else {\n\t\t\n\t\tfetch.apiCall( 'sidebar', null, null, function( call, id, body, notes ) {\n\t\t\t\n\t\t\tfetchResult( call, id, body, notes )\n\t\t})\n\t}\n})\n\n\n\n//note(dgmid): spellcheck\n\nipcRenderer.on('spellcheck', (event, message) => {\n\t\n\tlet state = ( message ) ? false : true\n\t\n\tstore.set('appSettings.spellcheck', state)\n\ttoggleSpellcheck( state )\n})\n\n\n\n//note(dgmid): display categories\n\nipcRenderer.on('showcats', (event, message) => {\n\t\n\ttoggleCategories( message )\n})\n\n\n\n//note(dgmid): update-theme\n\nipcRenderer.on('set-theme', (event, message) => {\n\t\n\t__setTheme()\n})\n\n\n\n//note(dgmid): toggle-sidebar\n\nipcRenderer.on('toggle-categories', (event, message) => {\n\t\n\t$('#frame, footer').toggleClass('slide')\n\t\n\tlet cats = store.get( 'appInterface.categories' ) ? false : true\n\tstore.set( 'appInterface.categories', cats )\n})\n\n\n\n//note(dgmid): toggle category count\n\nipcRenderer.on('toggle-catcount', (event, message) => {\n\t\n\t$('.cat-count').toggleClass('show')\n\t\n\tlet count = store.get( 'appSettings.catcount' ) ? false : true\n\tstore.set( 'appSettings.catcount', count )\n})\n\n\n\n//note(dgmid): toggle category icons is sidebar\n\nipcRenderer.on('toggle-caticons', (event, message) => {\n\t\n\t$('#sidebar').toggleClass('showcats')\n\t\n\tlet icons = store.get( 'appSettings.showcats' ) ? false : true\n\tstore.set( 'appSettings.showcats', icons )\n})\n\n\n//note(dgmid): modal\n\nfunction openModal( url, width, height, resize ) {\n\t\n\tmodal = new remote.BrowserWindow({\n\t\t\n\t\t\tparent: remote.getCurrentWindow(),\n\t\t\tmodal: true,\n\t\t\twidth: width,\n\t\t\tminWidth: width,\n\t\t\tmaxWidth: width,\n\t\t\theight: height,\n\t\t\tminHeight: height,\n\t\t\tresizable: resize,\n\t\t\tshow: false,\n\t\t\tframe: false,\n\t\t\ttransparent: true,\n\t\t\tvibrancy: 'popover',\n\t\t\twebPreferences: {\n\t\t\tdevTools: false,\n\t\t\t\tpreload: path.join(__dirname, './preload.min.js'),\n\t\t\t\tnodeIntegration: true\n\t\t\t}\t\n\t\t})\n\t\t\n\tmodal.loadURL( url )\n\t\n\tmodal.once('ready-to-show', () => {\n\t\t\n\t\tmodal.show()\n\t})\n}\n\n\n\n//note(dgmid): log in modal\n\nipcRenderer.on('open-login-modal', (event, message) => {\n\t\n\topenModal( 'file://' + __dirname + '/../html/login.html', 480, 210, false )\n})\n\n\n\n//note(dgmid): close login modal\n\nipcRenderer.on('close-login-modal', (event, message) => {\n\t\n\tmodal.close()\n})\n\n\n\n//note(dgmid): note menu commands\n\nipcRenderer.on('note', (event, message) => {\n\t\n\tlet selected = store.get( 'appInterface.selected' )\n\t\n\tswitch( message ) {\n\t\t\n\t\tcase 'new':\n\t\t\t\n\t\t\tlet body\n\t\t\t\n\t\t\tswitch( store.get( 'categories.selected' ) ) {\n\t\t\t\n\t\t\t\tcase '##all##':\n\t\t\t\tcase '##none##':\n\t\t\t\t\t\n\t\t\t\t\tbody = {\n\t\t\t\t\t\t\"content\": '# ' +  i18n.t('app:sidebar.new', 'New note')\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\tbreak\n\t\t\t\t\n\t\t\t\tcase '##fav##':\n\t\t\t\t\t\n\t\t\t\t\tbody = {\n\t\t\t\t\t\t\"content\": '# ' +  i18n.t('app:sidebar.new', 'New note'),\n\t\t\t\t\t\t\"favorite\": true\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\tbreak\n\t\t\t\t\n\t\t\t\tdefault:\n\t\t\t\t\t\n\t\t\t\t\tbody = {\n\t\t\t\t\t\t\"content\": '# ' +  i18n.t('app:sidebar.new', 'New note'),\n\t\t\t\t\t\t\"category\": $('.categories li button.selected').data('category')\n\t\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tfetch.apiCall( 'new', null, body, function( call, id, body, notes ) {\n\t\t\t\t\n\t\t\t\tfetchResult( call, id, body, notes )\n\t\t\t})\n\t\t\t\n\t\tbreak\n\t\t\n\t\tcase 'edit':\n\t\t\tif( selected ) editNote( selected )\n\t\tbreak\n\t\t\n\t\tcase 'save':\n\t\t\tif( selected ) saveNote( selected )\n\t\tbreak\n\t\t\n\t\tcase 'favorite':\n\t\t\tif( selected ) {\n\t\t\t\n\t\t\t\tlet favorite = ( $(`#sidebar li button[data-id=\"${selected}\"]`).attr('data-favorite') == 'true' ) ? false : true\n\t\t\t\t\n\t\t\t\tfetch.apiCall( 'update', selected, {\"favorite\": favorite}, function( call, id, body, notes ) {\n\t\t\t\t\t\n\t\t\t\t\tfetchResult( call, id, body, notes )\n\t\t\t\t})\n\t\t\t}\n\t\tbreak\n\t\t\n\t\tcase 'newcat':\n\t\t\t\n\t\t\tif( selected ) {\n\t\t\t\topenModal( 'file://' + __dirname + `/../html/new-category.html?id=${selected}`, 480, 180, false )\n\t\t\t}\n\t\tbreak\n\t\t\n\t\tbreak\n\t\t\n\t\tcase 'export':\n\t\t\tif( selected ) {\n\t\t\t\t\n\t\t\t\tfetch.apiCall( 'export', selected, null, function( call, id, body, notes ) {\n\t\t\t\t\t\n\t\t\t\t\tfetchResult( call, id, body, notes )\n\t\t\t\t})\n\t\t\t}\n\t\tbreak\n\t\t\n\t\tcase 'delete':\n\t\t\tif( selected ) deleteCheck( selected )\n\t\tbreak\n\t\t\n\t\tcase 'selectall':\n\t\t\tif( !easymde.isPreviewActive() ) easymde.codemirror.execCommand('selectAll')\n\t\tbreak\n\t}\n})\n\n\n\n//note(dgmid): markdown menu commands\n\nipcRenderer.on('markdown', (event, message) => {\n\t\n\tif( !easymde.isPreviewActive() ) {\n\t\t\n\t\tswitch( message ) {\n\t\t\t\n\t\t\tcase 'h1':\n\t\t\t\teasymde.toggleHeading1()\n\t\t\tbreak\n\t\t\tcase 'h2':\n\t\t\t\teasymde.toggleHeading2()\n\t\t\tbreak\n\t\t\tcase 'h3':\n\t\t\t\teasymde.toggleHeading3()\n\t\t\tbreak\n\t\t\tcase 'h4':\n\t\t\t\teasymde.toggleHeading4()\n\t\t\tbreak\n\t\t\tcase 'h5':\n\t\t\t\teasymde.toggleHeading5()\n\t\t\tbreak\n\t\t\tcase 'h6':\n\t\t\t\teasymde.toggleHeading6()\n\t\t\tbreak\n\t\t\tcase 'b':\n\t\t\t\teasymde.toggleBold()\n\t\t\tbreak\n\t\t\tcase 'i':\n\t\t\t\teasymde.toggleItalic()\n\t\t\tbreak\n\t\t\tcase 'del':\n\t\t\t\teasymde.toggleStrikethrough()\n\t\t\tbreak\n\t\t\tcase 'ul':\n\t\t\t\teasymde.toggleUnorderedList()\n\t\t\tbreak\n\t\t\tcase 'ol':\n\t\t\t\teasymde.toggleOrderedList()\n\t\t\tbreak\n\t\t\tcase 'cl':\n\t\t\t\teasymde.codemirror.replaceSelection('- [ ]  ')\n\t\t\t\teasymde.codemirror.focus()\n\t\t\tbreak\n\t\t\tcase 'a':\n\t\t\t\teasymde.drawLink()\n\t\t\tbreak\n\t\t\tcase 'img':\n\t\t\t\teasymde.drawImage()\n\t\t\tbreak\n\t\t\tcase 'code':\n\t\t\t\teasymde.toggleCodeBlock()\n\t\t\tbreak\n\t\t\tcase 'blockquote':\n\t\t\t\teasymde.toggleBlockquote()\n\t\t\tbreak\n\t\t\tcase 'table':\n\t\t\t\teasymde.drawTable()\n\t\t\tbreak\n\t\t\tcase 'hr':\n\t\t\t\teasymde.drawHorizontalRule()\n\t\t\tbreak\n\t\t}\n\t}\n})\n\n\n\n//note(dgmid): html submenu menu commands\n\nipcRenderer.on('html', (event, message) => {\n\t\n\t\n\tif( !easymde.isPreviewActive() ) {\n\t\t\n\t\tswitch( message ) {\n\t\t\t\n\t\t\tcase 'small':\n\t\t\tcase 'sup':\n\t\t\tcase 'sub':\n\t\t\tcase 'u':\n\t\t\tcase 'mark':\n\t\t\t\twrapTextToSelection( `<${message}>`, `</${message}>` )\n\t\t\tbreak\n\t\t\tcase 'javascript':\n\t\t\tcase 'json':\n\t\t\tcase 'html':\n\t\t\tcase 'css':\n\t\t\tcase 'scss':\n\t\t\tcase 'php':\n\t\t\tcase 'objective-c':\n\t\t\tcase 'c-like':\n\t\t\tcase 'bash':\n\t\t\t\twrapBlockToCursor( `\\`\\`\\` ${message}`, `\\`\\`\\`` )\n\t\t\tbreak\n\t\t\tcase 'dl':\n\t\t\t\tinsertTextAtCursor(\n`<dl>\n\t<dt>${i18n.t('app:main.title', 'title')}</dt>\n\t<dd>${i18n.t('app:main.description', 'description')}</dd>\n\t<dt>${i18n.t('app:main.title', 'title')}</dt>\n\t<dd>${i18n.t('app:main.description', 'description')}</dd>\n</dl>` )\n\t\t\tbreak\n\t\t}\n\t}\n})\n\n\n\n//note(dgmid): view menu - zoom levels\n\nipcRenderer.on('set-zoom-level', (event, message) => {\n\t\n\tlet zoom = store.get( 'appSettings.zoom' )\n\t\n\tswitch( message ) {\n\t\t\n\t\tcase 1:\n\t\t\tzoom++\n\t\t\tif( zoom > 16 ) zoom = 16\n\t\tbreak\n\t\t\n\t\tcase -1:\n\t\t\tzoom--\n\t\t\tif( zoom < 4 ) zoom = 4\n\t\tbreak\n\t\t\n\t\tdefault:\n\t\t\tzoom = 10\n\t}\n\t\n\tstore.set( 'appSettings.zoom', zoom )\n\tapplyZoom( zoom )\n})\n\n\n\n//note(dgmid): sidebar context menu commands\n\nipcRenderer.on('context-favorite', (event, message) => {\n\t\n\tlet favorite \t= ( message.favorite == 'true' ) ? false : true,\n\t\tid \t\t\t= message.id\n\t\n\tfetch.apiCall( 'update', id, {\"favorite\": favorite}, function( call, id, body, notes ) {\n\t\t\t\n\t\tfetchResult( call, id, body, notes )\n\t})\n})\n\n\nipcRenderer.on('context-export', (event, id) => {\n\t\n\tfetch.apiCall( 'export', id, null, function( call, id, body, notes ) {\n\t\t\t\n\t\tfetchResult( call, id, body, notes )\n\t})\n})\n\n\nipcRenderer.on('context-delete', (event, id) => {\n\t\n\tdeleteCheck( id )\n})\n\n\nipcRenderer.on('context-category', (event, message) => {\n\t\n\tlet id \t\t\t= parseInt( message.id ),\n\t\tcategory\t= message.category,\n\t\tnotes\t\t= database.get('notes')\n\t\n\tlet note = notes.find( x => x.id === id ),\n\t\tbody = {\n\t\t\n\t\t\"modified\": \tnote.modified,\n\t\t\"content\": \t\tnote.content,\n\t\t\"category\":\t\tcategory\n\t}\n\t\n\tfetch.apiCall( 'category', id, body, function( call, id, body, notes ) {\n\t\t\t\n\t\tfetchResult( call, id, body, notes )\n\t})\n})\n\n\nipcRenderer.on('context-newcategory', (event, message) => {\n\t\n\topenModal( 'file://' + __dirname + `/../html/new-category.html?id=${message}`, 480, 180, false )\n})\n\n\nipcRenderer.on('category-order', (event, message) => {\n\t\n\tstore.set( 'appSettings.ordercats', message )\n\t\n\t$('#categories').removeClass( 'asc desc' ).addClass( message )\n})\n\n\n//note(dgmid): notes context menu commands\n\nipcRenderer.on('context-note-encode', (event, message) => {\n\t\n\tlet encoded = entities.encode( message )\n\teasymde.codemirror.doc.replaceSelection( encoded )\n})\n\n\nipcRenderer.on('context-note-decode', (event, message) => {\n\t\n\tlet decoded = entities.decode( message )\n\teasymde.codemirror.doc.replaceSelection( decoded )\n})\n\n\n\n//note(dgmid): on click sidebar button\n\n$('body').on('click', '#sidebar li button', function(event) {\n\t\n\tevent.stopPropagation()\n\t\n\tlet id = $(this).data('id')\n\t\n\t$('#time').empty().hide()\n\t$('main').append('<div class=\"loader\"><div class=\"spinner\"></div></div>')\n\t\n\t$('#sidebar li button').removeClass('selected').removeClass('above-selected')\n\t$(this).addClass('selected').parent().prev().children().addClass('above-selected')\n\t\n\tfetch.apiCall( 'single', id, null, function( call, id, body, notes ) {\n\t\t\t\n\t\t\tfetchResult( call, id, body, notes )\n\t\t})\n\t\n\tstore.set( 'appInterface.selected', id )\n})\n\n\n\n//note(dgmid): on right click sidebar button\n\n$('body').on('mouseup', '#sidebar li button', function(event) {\n\t\n\tevent.stopPropagation()\n\t\n\tlet data = {\n\t\t'id': \t\t$(this).data('id'),\n\t\t'title': \t$(this).data('title'),\n\t\t'favorite': $(this).attr('data-favorite'),\n\t\t'category': $(this).attr('data-category'),\n\t\t'catID': \t$(this).attr('data-catid')\n\t}\n\t\n\tif( event.which === 3 ) {\n\t\t\n\t\tipcRenderer.send('show-sidebar-menu', data )\n\t\treturn\n\t}\n})\n\n\n$('body').on('focus', '#sidebar li button', function(event) {\n\t\n\t$(this).parent().prev().children().addClass('above-selected')\n})\n\n\n$('body').on('focusout', '#sidebar li button', function(event) {\n\t\n\tif( !$(this).hasClass('selected') ) {\n\t\t\n\t\t$(this).parent().prev().children().removeClass('above-selected')\n\t}\n})\n\n\n\n//note(dgmid): on click empty sidebar\n\n$('body').on('mouseup', 'aside', function(event) {\n\t\n\tif( event.which === 3 ) {\n\t\n\t\tipcRenderer.send('show-sidebar-menu', null )\n\t}\n})\n\n\n\n//note(dgmid): on click note preview\n\n$('body').on('mouseup', '.editor-preview-active', function(event) {\n\t\n\tif( event.which === 3 ) {\n\t\t\n\t\tipcRenderer.send('show-notes-menu',\n\t\t\t{\n\t\t\t\tselection: '',\n\t\t\t\tpreview: true\n\t\t\t}\n\t\t)\n\t}\n})\n\n\n\n//note(dgmid): open links in default browser\n\n$(document).on('click', 'a[href^=\"http\"]', function(event) {\n\t\n\tevent.preventDefault()\n\tshell.openExternal(this.href)\n})\n\n\n\n//note(dgmid): change category\n\n$('body').on('click', '.categories button', function(event) {\n\t\n\tlet cat = $(this).attr( 'data-category' ),\n\t\tcatid = $(this).attr( 'data-catid' )\n\t\n\t$('.categories button').removeClass('selected')\n\t$(this).addClass('selected')\n\t\n\tstore.set( 'categories.selected', catid )\n\t\n\tselectCategory( catid )\n\tshowHideCategoryIcons()\n})\n\n\n\n//note(dgmid): select category in category sidebar\n\nfunction selectCategory( catid ) {\n\t\n\tswitch( catid ) {\n\t\t\n\t\tcase '##all##':\n\t\t\t \n\t\t\t$(`#sidebar li`).show()\n\t\t\t\n\t\tbreak\n\t\t\n\t\tcase '##fav##':\n\t\t\t\n\t\t\t$(`#sidebar li`).hide()\n\t\t\t$(`#sidebar button[data-favorite='true']`).parent('li').show()\n\t\t\t\n\t\tbreak\n\t\t\n\t\tdefault:\n\t\t\t\n\t\t\t$(`#sidebar li`).hide()\n\t\t\t$(`#sidebar button[data-catid='${catid}']`).parent('li').show()\t\n\t\tbreak\n\t}\n}\n\n\n\n//note(dgmid): keyboard arrow keys\n\ndocument.addEventListener( 'keydown', function( event ) {\n\t\n\tif( easymde.isPreviewActive() ) {\n\t\t\n\t\t$('#sidebar button').blur()\n\t\t\n\t\tlet items\n\t\t\n\t\tswitch( event.which ) {\n\t\t\t\n\t\t\tcase 38:\n\t\t\t\titems = $('#sidebar button.selected').parent('li').prevAll('li:visible')\n\t\t\t\titems.first().find('button').click()\n\t\t\tbreak\n\t\t\t\n\t\t\tcase 40:\n\t\t\t\titems = $('#sidebar button.selected').parent('li').nextAll('li:visible')\n\t\t\t\titems.first().find('button').click()\n\t\t\tbreak\n\t\t}\n\t}\n})\n\n\n\n//note(dgmid): open links in browser\n\n$('body').on('click', '#update', (event) => {\n\t\n\tevent.preventDefault()\n\t\n\tlet link = $('#update').attr( 'data-url' )\n\t\n\tshell.openExternal(link)\n})\n\n\n\n//note(dgmid): remove bullets from checkbox lists\n\nfunction setCheckLists() {\n\t\n\t$('input[type=\"checkbox\"]').parent().css('list-style-type', 'none')\n}\n\n\n//note(dgmid): check app version\n\nfunction checkAppVersion() {\n\t\n\tconst version \t\t\t= require('electron').remote.app.getVersion()\n\tconst compareVersions\t= require('compare-versions')\n\t\n\t$.getJSON( 'https://api.github.com/repos/dgmid/nextcloud-notes-mac-client/releases/latest', function( release ) {\n\t\t\n\t\tlet latest = release.name\n\t\t\n\t\tlog.info( `this version: ${version}` )\n\t\tlog.info( `latest version: ${latest}` )\n\t\t\n\t\tif( compareVersions.compare( version, latest, '<' ) ) {\n\t\t\t\n\t\t\t$('#update').attr('data-url', `https://www.midwinter-dg.com/mac-apps/nextcloud-notes-client.html?app`).fadeIn('slow')\n\t\t\t$('#update-version').html( latest )\n\t\t}\n\t\t\n\t\tif( compareVersions.compare( version, latest, '>' ) ) {\n\t\t\t\t\t\t\n\t\t\tif( version.includes('-a') ) {\n\t\t\t\t\n\t\t\t\t$('header').append( `<span id=\"dev\" class=\"α\">DEV: v${version}</span>` )\n\t\t\t\t\n\t\t\t} else if ( version.includes('-b') ) {\n\t\t\t\t\n\t\t\t\t$('header').append( `<span id=\"dev\" class=\"β\">DEV: v${version}</span>` )\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\t$('header').append( `<span id=\"dev\">DEV: v${version}</span>` )\n\t\t\t}\n\t\t\t\n\t\t\t$('#dev').fadeIn('slow')\n\t\t}\n\t})\n\t.done( function() {\n\t\t\n\t\tlog.info( `check release succeeded` )\n\t})\n\t.fail( function( jqXHR, textStatus, errorThrown ) {\n\t\t\n\t\tlog.error( `check release failed ${textStatus}` )\n\t})\n\t.always( function() {\n\t\t\n\t\tlog.info( `check release ended` )\n\t})\n}\n\n$('body').on('mouseenter', 'main a', function() {\n\t\n\t$('#location').empty().html( this.href )\n\t$('samp').addClass('show')\n})\n\n$('body').on('mouseleave', 'main a', function() {\n\t\n\t$('samp').removeClass('show')\n})\n\n//note(dgmid): docready\n\n$(document).ready(function() {\n\t\n\t//note(dgmid): set lang\n\t\n\t$('html').attr('lang', i18n.language)\n\t\n\t\n\t//note(dgmid): display category icons in sidebar \n\t\n\tif( store.get( 'appSettings.showcats' ) ) {\n\t\t\n\t\t$('#sidebar').addClass( 'showcats' )\n\t}\n\t\n\t\n\t//note(dgmid): show or hide categories sidebar\n\t\n\tif( store.get( 'appInterface.categories' ) ) {\n\t\t\n\t\t$('#frame, footer').addClass( 'slide' )\n\t}\n\t\n\t\n\t//note(dgmid): show or hide category counts\n\t\n\tif( store.get( 'appSettings.catcount' ) ) {\n\t\t\n\t\t$('.cat-count').addClass('show')\n\t}\n\t\n\t\n\t//note(dgmid): set edit button title\n\t\n\t$('#edit').attr('title', i18n.t('app:main.button.edit', 'Edit Note'))\n\t\n\t\n\t//note(dgmid): set categories strings\n\t\n\t$('#cat-title').html( i18n.t('app:categories.title', 'Categories'))\n\t$('#cat-all').html( i18n.t('app:categories.all', 'All notes'))\n\t$('#cat-all').attr('title', i18n.t('app:categories.all', 'All notes'))\n\t$('#cat-fav').html( i18n.t('app:categories.fav', 'Favorites'))\n\t$('#cat-fav').attr('title', i18n.t('app:categories.fav', 'Favorites'))\n\t$('#cat-none').html( i18n.t('app:categories.none', 'Uncategorised'))\n\t$('#cat-none').attr('title', i18n.t('app:categories.none', 'Uncategorised'))\n\t$('#update-label').html( i18n.t('app:titlebar.update', 'Update Available'))\n\t\n\t\n\t//note(dgmid): check login\n\t\n\tif( !server || !username || !password ) {\n\t\t\n\t\topenModal( 'file://' + __dirname + '/../html/login.html', 480, 210, false )\n\t\t\n\t} else {\n\t\t\n\t\tfetch.apiCall( 'all', null, null, function( call, id, body, notes ) {\n\t\t\t\n\t\t\tfetchResult( call, id, body, notes )\n\t\t})\n\t}\n\t\n\t\n\t//note(dgmid): edit save\n\t\n\t$('#edit').click(function() {\n\t\t\n\t\teditNote()\n\t})\n})\n"]}