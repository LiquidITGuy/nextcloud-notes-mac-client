{"version":3,"sources":["app.js"],"names":["ipcRenderer","shell","require","Store","store","remote","dialog","dateFormat","$","marked","removeMarkdown","pretty","fs","server","get","username","password","modal","SimpleMDE","smeSetup","element","autofocus","forceSync","status","spellChecker","toolbar","shortcuts","toggleStrikethrough","toggleBlockquote","drawTable","drawHorizontalRule","cleanBlock","toggleSideBySide","toggleFullScreen","togglePreview","simplemde","apiCall","call","id","body","method","url","init","headers","Authorization","btoa","Content-Type","mode","cache","JSON","stringify","console","log","fetch","then","response","ok","text","showErrorBox","error","message","notes","parse","set","html","removeData","attr","favorite","resetEditor","exportNote","listNotes","displayNote","catch","codemirror","setValue","value","insertTextAtCursor","note","getDoc","cursor","getCursor","replaceRange","wrapTextToSelection","start","end","selection","getSelection","replaceSelection","array","sidebar","now","Date","getTime","sortby","orderby","length","sort","x","y","itemX","itemY","item","formattedDate","formatDate","modified","plainTxt","content","replace","substr","slice","title","append","category","getSelected","timestamp","addClass","removeClass","isPreviewActive","clearHistory","applyZoom","selected","parent","prev","children","editNote","focus","setCursor","lineCount","historySize","undo","showMessageBox","getCurrentWindow","detail","buttons","Math","floor","saveNote","exportPath","showSaveDialog","defaultPath","buttonLabel","properties","filters","name","extensions","filename","exported","filetype","split","pop","ocd","outputFile","readFile","data","Notification","err","deleteCheck","level","css","font-size","toggleSpellcheck","state","toggleCursorPosition","alert","openModal","width","height","resize","BrowserWindow","minWidth","maxWidth","minHeight","resizable","show","backgroundColor","webPreferences","nodeIntegration","loadURL","once","on","event","__dirname","close","toggleHeading1","toggleHeading2","toggleHeading3","toggleHeading4","toggleHeading5","toggleHeading6","toggleBold","toggleItalic","toggleUnorderedList","toggleOrderedList","drawLink","drawImage","toggleCodeBlock","zoom","stopPropagation","this","which","send","hasClass","preventDefault","link","target","href","openExternal","document","ready","click"],"mappings":"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","file":"../app.min.js","sourcesContent":["'use strict'\n\nconst {ipcRenderer, shell} = require( 'electron' )\nconst Store = require( 'electron-store' )\nconst store = new Store()\nconst { remote } = require( 'electron' )\nconst dialog = remote.dialog\nconst dateFormat = require( 'dateformat' )\nconst $ = require( 'jquery' )\nconst marked = require( 'marked' )\nconst removeMarkdown = require( 'remove-markdown' )\nconst pretty = require( 'pretty' )\nconst fs = require( 'fs-extra' )\n\nconst \tserver \t\t= store.get( 'loginCredentials.server' ),\n\t\tusername \t= store.get( 'loginCredentials.username' ),\n\t\tpassword \t= store.get( 'loginCredentials.password' )\n\nlet modal\n\nconst SimpleMDE = require( 'easymde' )\n\nlet smeSetup = {\n\t\t\n\t\telement: $('#note')[0],\n\t\tautofocus: false,\n\t\tforceSync: true,\n\t\tstatus: false,\n\t\tspellChecker: true,\n\t\ttoolbar: [\t'heading',\n\t\t\t\t\t'|',\n\t\t\t\t\t'bold',\n\t\t\t\t\t'italic',\n\t\t\t\t\t'strikethrough',\n\t\t\t\t\t'|',\n\t\t\t\t\t'unordered-list',\n\t\t\t\t\t'ordered-list',\n\t\t\t\t\t'|',\n\t\t\t\t\t'link',\n\t\t\t\t\t'image',\n\t\t\t\t\t'|',\n\t\t\t\t\t'code',\n\t\t\t\t\t'quote',\n\t\t\t\t\t'table',\n\t\t\t\t\t'horizontal-rule'\n\t\t\t\t],\n\t\tshortcuts: {\n\t\t\t'toggleStrikethrough': 'Cmd-Alt-D',\n\t\t\t'toggleBlockquote': 'Cmd-\\'',\n\t\t\t'drawTable': 'Cmd-T',\n\t\t\t'drawHorizontalRule': 'Cmd--',\n\t\t\t'cleanBlock': null,\n\t\t\t'toggleSideBySide': null,\n\t\t\t'toggleFullScreen': null,\n\t\t\t'togglePreview': null\t\n\t\t}\n\t}\n\nlet simplemde = new SimpleMDE( smeSetup )\n\n\n\n//note(@duncanmid): call notes api\n\nfunction apiCall( call, id, body ) {\n\t\n\tlet method\n\t\n\tswitch( call ) {\n\t\t\n\t\tcase 'new':\n\t\t\tmethod = 'post'\n\t\tbreak\n\t\t\n\t\tcase 'save':\n\t\tcase 'update':\n\t\t\tmethod = 'put'\n\t\tbreak\n\t\t\n\t\tcase 'delete':\n\t\t\tmethod = 'delete'\n\t\tbreak\n\t\t\n\t\tdefault: //all, single or export\n\t\t\tmethod = 'get'\n\t}\n\t\n\tlet url = '/index.php/apps/notes/api/v0.2/notes',\n\tinit = {\n\t\t\n\t\tmethod: method,\n\t\theaders: {\n\t\t\t'Authorization': 'Basic ' + btoa( username + ':' + password ),\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tmode: 'cors',\n\t\tcache: 'no-store'\n\t}\n\t\n\tif( id ) { url += `/${id}` }\n\tif( body ) { init.body = JSON.stringify( body ) }\n\t\n\tconsole.log( `URL: ${url}` )\n\t\n\tfetch(server + url, init).then(function(response) {\n\t\n\t\tif (response.ok) {\n\t\t\t\n\t\t\tconsole.log('response OK')\n\t\t\treturn response.text()\n\t\t\n\t\t} else {\n\t\t\t\n\t\t\tdialog.showErrorBox(\n\t\t\t\t' Server connection error',\n\t\t\t\t`there was an error connecting to:\\n${server}`\n\t\t\t)\n\t\t\t\n\t\t\tconsole.log( response.error() )\n\t\t}\n\t\n\t}).then(function(message) {\n\t\t\n\t\t\n\t\tlet notes = JSON.parse(message)\n\t\t\n\t\t\n\t\tif (notes['status'] == 'error') {\n\t\t\t\n\t\t\tdialog.showErrorBox(\n\t\t\t\t'JSON parsing error',\n\t\t\t\t`An error occured parsing the notes`\n\t\t\t)\n\t\t\t\n\t\t\tconsole.log(notes['message'])\t\n\t\t\n\t\t} else {\n\t\t\t\n\t\t\tswitch( call ) {\n\t\t\t\t\n\t\t\tcase 'new': // create new note\n\t\t\t\t\n\t\t\t\tstore.set('appInterface.selected', notes.id)\n\t\t\t\t$('#sidebar').html('')\n\t\t\t\tapiCall('all')\n\t\t\t\t\n\t\t\tbreak\n\t\t\t\n\t\t\tcase 'save': // save note\n\t\t\t\t\n\t\t\t\t$('#sidebar').html('')\n\t\t\t\tapiCall('sidebar')\n\t\t\t\t\n\t\t\tbreak\n\t\t\t\n\t\t\tcase 'update': // modify existing note\n\t\t\t\t\n\t\t\t\t$(`button[data-id=\"${id}\"]`).removeData('favorite')\n\t\t\t\t$(`button[data-id=\"${id}\"]`).attr('data-favorite', body.favorite)\n\t\t\t\n\t\t\tbreak\n\t\t\t\n\t\t\tcase 'delete': // delete note\n\t\t\t\t\n\t\t\t\tlet selected = $('#sidebar li button.selected').attr('data-id')\n\t\t\t\t\n\t\t\t\tif( selected == id) {\n\t\t\t\t\t\n\t\t\t\t\tresetEditor()\n\t\t\t\t\t\n\t\t\t\t\tstore.set( 'appInterface.selected', null )\n\t\t\t\t\t$('#note').attr('data-id', null)\n\t\t\t\t\t$('#time, #note').html('')\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$('#sidebar').html('')\n\t\t\t\tapiCall('all')\n\t\t\t\n\t\t\tbreak\n\t\t\t\n\t\t\tcase 'export':\n\t\t\t\t\n\t\t\t\texportNote( notes )\n\t\t\t\t\n\t\t\tbreak\n\t\t\t\n\t\t\tcase 'sidebar':\n\t\t\t\t\n\t\t\t\tlistNotes( notes, 'sidebar' )\n\t\t\t\t\n\t\t\tbreak\n\t\t\t\n\t\t\tdefault: // get single note or all notes\n\t\t\t\t\n\t\t\t\t(id) ? displayNote( notes ) : listNotes( notes )\n\t\t\t}\n\t\t}\n\t\n\t}).catch(function(error) {\n\t\t\n\t\tdialog.showErrorBox(\n\t\t\t\t`Server connection error`,\n\t\t\t\t`there was an error connecting to:\\n${server}`\n\t\t\t)\n\t\t\n\t\tconsole.log(error)\n\t})\n}\n\n\n\n//note reset editor\n\nfunction resetEditor() {\n\t\n\tsimplemde.codemirror.setValue('')\n\tsimplemde.value('')\n\t$('.editor-preview').html('')\n}\n\n\n\n//note(@duncanmid): codeMirror - insert / wrap text\n\nfunction insertTextAtCursor( text ) {\n\t\n\tlet note = simplemde.codemirror.getDoc()\n\tlet cursor = note.getCursor()\n\tnote.replaceRange(text, cursor)\n}\n\nfunction wrapTextToSelection( start, end ) {\n\t\n\tlet note = simplemde.codemirror.getDoc()\n\tlet selection = note.getSelection()\n\tnote.replaceSelection( start + selection + end )\n}\n\n\n\n//note(@duncanmid): generate ordered sidebar entries\n\nfunction listNotes( array, sidebar ) {\n\t\n\tconst date = new Date()\n\tconst now = date.getTime() / 1000\n\t\n\tlet sortby \t= store.get( 'appSettings.sortby' ),\n\t\torderby = store.get( 'appSettings.orderby' )\n\t\n\tif( array.length > 1 ) {\n\t\t\n\t\tarray.sort(function(x, y) {\n\t\t\t\n\t\t\tvar itemX = x[sortby]\n\t\t\tvar itemY = y[sortby]\n\t\t\t\n\t\t\tif( orderby === 'asc' ) {\n\t\t\t\t\n\t\t\t\treturn (itemX < itemY) ? -1 : (itemX > itemY) ? 1 : 0\n\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\treturn (itemX > itemY) ? -1 : (itemX < itemY) ? 1 : 0\n\t\t\t}\n\t\t})\n\t}\n\t\n\tfor ( let item of array ) {\n\t\t\n\t\tlet theDate = new Date( item.modified )\n\t\tlet formattedDate = formatDate( now, theDate.getTime() )\n\t\t\n\t\tlet plainTxt = removeMarkdown( item.content.replace(/(!\\[.*\\]\\(.*\\)|<[^>]*>|>|<)/g, ''))\n\t\t\n\t\tif( plainTxt ) {\n\n\t\t\tplainTxt = plainTxt.substr(0, 120).slice(item.title.length)\n\t\t\t\n\t\t} else {\n\t\t\t\n\t\t\tplainTxt = 'No additional text'\n\t\t}\n\t\t                                                                                     \n\t\t$('#sidebar').append(\n\t\t`<li>\n\t\t\t<button data-id=\"${item.id}\" data-title=\"${item.title}\" data-category=\"${item.category}\" data-favorite=\"${item.favorite}\">\n\t\t\t\t<span class=\"side-title\">${item.title}</span>\n\t\t\t\t<span class=\"side-text\">${formattedDate}&nbsp;&nbsp;${plainTxt}</span>\n\t\t\t</button>\n\t\t</li>\n\t\t`)\n\t}\n\t\n\t( sidebar ) ? getSelected( 'sidebar' ) : getSelected()\n}\n\n\n\n//note(@duncanmid): formatDate\n\nfunction formatDate( now, timestamp ) {\n\t\n\t//todo(@duncanmid): add if the time (H:MM) is greater than current -> 'yesterday' \n\t\n\tif( (now - 86400) < timestamp ) {\n\t\t\n\t\t//time\n\t\treturn dateFormat( timestamp * 1000, 'H:MM' )\n\t\n\t} else if ( (now - 604800) < timestamp ) {\n\t\t\n\t\t//day\n\t\treturn dateFormat( timestamp * 1000, 'dddd')\n\t\n\t} else {\n\t\t\n\t\t//date\n\t\treturn dateFormat( timestamp * 1000, 'dd/mm/yy')\n\t}\n}\n\n\n\n//note(@duncanmid): display single note\n\nfunction displayNote( note ) {\n\t\n\t$('.CodeMirror-code').addClass('hide')\n\t$('#edit').removeClass('editing')\n\t\n\t$('#time').html( dateFormat(note.modified * 1000, 'd mmmm, yyyy \"at\" HH:MM') )\n\t\n\tresetEditor()\n\t\n\tif( simplemde.isPreviewActive() ) simplemde.togglePreview()\n\t\n\t$('#note').attr('data-id', note.id)\n\tsimplemde.value( note.content )\n\tsimplemde.codemirror.clearHistory()\n\tsimplemde.togglePreview()\n\tapplyZoom( store.get( 'appSettings.zoom' ) )\n\t\n\t$('.CodeMirror-code').removeClass('hide')\n}\n\n\n\n//note(@duncanmid): get selected note\n\nfunction getSelected( sidebar ) {\n\t\n\tlet selected = store.get( 'appInterface.selected' )\n\t\n\tif( selected ) {\n\t\t\n\t\t$(`button[data-id=\"${selected}\"]`).addClass('selected').parent().prev().children().addClass('above-selected')\n\t\t\n\t\tif( !sidebar ) apiCall( 'single', selected )\n\t}\n}\n\n\n\n//note(@duncanmid): edit note\n\nfunction editNote() {\n\t\n\tlet selected = store.get( 'appInterface.selected' )\n\t\t\n\tif( selected ) {\n\t\t\n\t\tif( simplemde.isPreviewActive() ) {\n\t\t\n\t\t\t$('#edit').addClass('editing')\n\t\t\tsimplemde.togglePreview()\n\t\t\tsimplemde.codemirror.focus()\n\t\t\t\n\t\t\tif( store.get('appSettings.cursor') == 'end' ) {\n\t\t\t\t\n\t\t\t\tsimplemde.codemirror.setCursor(simplemde.codemirror.lineCount(), 0)\n\t\t\t}\n\t\t\n\t\t} else {\n\t\t\t\n\t\t\tif( simplemde.codemirror.historySize().undo > 0 ) {\n\t\t\t\n\t\t\t\tlet response = dialog.showMessageBox(remote.getCurrentWindow(), {\n\t\t\t\t\t\t\t\tmessage: `You have made changes to this note`,\n\t\t\t\t\t\t\t\tdetail: `Do you want to save them?`,\n\t\t\t\t\t\t\t\tbuttons: ['Save changes','Cancel']\n\t\t\t\t\t\t\t})\n\t\t\t\t\n\t\t\t\tif( response === 0 ) {\n\t\t\t\t\t\n\t\t\t\t\tlet content = simplemde.value()\n\t\t\t\t\t\n\t\t\t\t\tsimplemde.codemirror.clearHistory()\n\t\t\t\t\t\n\t\t\t\t\tapiCall( 'save', selected, {\"content\": content, \"modified\": Math.floor(Date.now() / 1000) } )\n\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\n\t\t\t\t\twhile ( simplemde.codemirror.historySize().undo > 0) simplemde.codemirror.undo()\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tsimplemde.togglePreview()\n\t\t\t$('#edit').removeClass('editing').focus()\n\t\t}\n\t}\n}\n\n\n\n//note(@duncanmid): save note\n\nfunction saveNote( id ) {\n\t\n\t\tif(\t!simplemde.isPreviewActive() &&\n\t\t\tsimplemde.codemirror.historySize().undo > 0 ) {\n\t\t\t\n\t\t\tconsole.log( 'SAVING!!' )\n\t\t\t\n\t\t\tlet content = simplemde.value()\n\t\t\t\t\t\t\n\t\t\t//simplemde.codemirror.clearHistory()\n\t\t\t\t\t\t\n\t\t\tapiCall( 'save', id, {\"content\": content, \"modified\": Math.floor(Date.now() / 1000) } )\n\t\t}\n}\n\n\n\n//note(@duncanmid): export note\n\nfunction exportNote( note ) {\n\t\n\tconst exportPath = store.get('exportPath')\n\t\n\tdialog.showSaveDialog(remote.getCurrentWindow(), {\n\t\t\t\n\t\t\tdefaultPath: `${exportPath}/${note.title}`,\n\t\t\tbuttonLabel: 'Export Note',\n\t\t\tproperties: [\t'openDirectory',\n\t\t\t\t\t\t\t'createDirectory'\n\t\t\t\t\t\t],\n\t\t\tfilters: [\n\t\t\t\t{\tname:\t\t'html',\n\t\t\t\t\textensions:\t['html']\n\t\t\t\t},\n\t\t\t\t{\tname:\t\t'markdown',\n\t\t\t\t\textensions:\t['md']\n\t\t\t\t},\n\t\t\t\t{\tname:\t\t'text',\n\t\t\t\t\textensions:\t['txt']\n\t\t\t\t}\n\t\t\t]\n\t\t},\t\t\n\t\t\n\t\trunExportProcess\n\t)\n\t\n\tfunction runExportProcess( filename ) {\n\t\t\n\t\tlet exported,\n\t\t\tfiletype\n\t\t\n\t\tswitch( filename.split('.').pop() ) {\n\t\t\t\n\t\t\tcase 'html':\n\t\t\t\t\n\t\t\t\tlet html = marked( note.content )\n\t\t\t\t\n\t\t\t\texported = pretty( `<!doctype html><html lang=\"en\"><head><meta charset=\"utf-8\" /><title>${note.title}</title></head><body>${html}</body></html>`, {ocd: true} )\n\t\t\t\t\n\t\t\t\tfiletype = 'html'\n\t\t\t\t\n\t\t\tbreak\n\t\t\t\n\t\t\tcase 'txt':\n\t\t\t\t\n\t\t\t\texported = removeMarkdown( note.content )\n\t\t\t\tfiletype = 'text'\n\t\t\t\n\t\t\tbreak\n\t\t\t\n\t\t\tdefault: //markdown\n\t\t\t\t\n\t\t\t\texported = note.content\n\t\t\t\tfiletype = 'markdown'\n\t\t}\n\t\t\n\t\tfs.outputFile(filename, exported)\n\t\t.then(() => fs.readFile(filename, 'utf8'))\n\t\t.then(data => {\n\t\t\t\n\t\t\tlet exportNotification = new Notification('Nextcloud Notes Client', {\n\t\t\t\n\t\t\t\tbody: `The note ${note.title} has been exported as ${filetype}.`\n\t\t\t})\n\t\t})\n\t\t\n\t\t.catch(err => {\n\t\t\t\n\t\t\tconsole.error(err)\n\t\t})\n\t}\n}\n\n\n\n//note(@duncanmid): delete check\n\nfunction deleteCheck( id ) {\n\t\n\tlet response = dialog.showMessageBox(remote.getCurrentWindow(), {\n\t\t\t\t\t\t\tmessage: `Are you sure you want to delete this note?`,\n\t\t\t\t\t\t\tdetail: `This operation is not reversable.`,\n\t\t\t\t\t\t\tbuttons: ['Delete Note','Cancel']\n\t\t\t\t\t\t})\n\t\t\n\tif( response === 0 ) {\n\t\t\n\t\tapiCall( 'delete', id )\n\t}\n}\n\n\n\n//note(@duncanmid): apply zoom level\n\nfunction applyZoom( level ) {\n\t\n\t$('.editor-preview').css({ \"font-size\": `${level/10}rem` })\n}\n\n\n\n//note(@duncanmid): toggle spellcheck\n\nfunction toggleSpellcheck( state ) {\n\t\n\t( state ) ? $('.CodeMirror').addClass('spellcheck') : $('.CodeMirror').removeClass('spellcheck')\n}\n\n\n\n//note(@duncanmid): toggle cursor position\n\nfunction toggleCursorPosition( state ) {\n\t\n\talert(state)\n}\n\n\n\n//note(@duncanmid): set zoom slider\n\nipcRenderer.on('set-zoom-slider', (event, message) => {\n\t\n\tapplyZoom( message )\n})\n\n\n\n//note(@duncanmid): reload sidebar\n\nipcRenderer.on('reload-sidebar', () => {\n\t\n\t$('#sidebar').html('')\n\tapiCall('all')\n})\n\n\n\n//note(@duncanmid): spellcheck\n\nipcRenderer.on('spellcheck', (event, message) => {\n\t\n\ttoggleSpellcheck( message )\n})\n\n\n\n//note(@duncanmid): modal\n\nfunction openModal( url, width, height, resize ) {\n\t\n\tmodal = new remote.BrowserWindow({\n\t\t\n\t\t\tparent: remote.getCurrentWindow(),\n\t\t\tmodal: true,\n\t\t\twidth: width,\n\t\t\tminWidth: width,\n\t\t\tmaxWidth: width,\n\t\t\theight: height,\n\t\t\tminHeight: height,\n\t\t\tresizable: resize,\n\t\t\tshow: false,\n\t\t\tbackgroundColor: '#ececec',\n\t\t\twebPreferences: {\n\t\t\t\tnodeIntegration: true\n\t\t\t}\t\n\t\t})\n\t\t\n\tmodal.loadURL( url )\n\t\n\tmodal.once('ready-to-show', () => {\n\t\t\n\t\tmodal.show()\n\t})\n}\n\n\n\n//note(@duncanmid): log in modal\n\nipcRenderer.on('open-login-modal', (event, message) => {\n\t\n\topenModal( 'file://' + __dirname + '/../html/login.html', 480, 180, false )\n})\n\n\n\n//note(@duncanmid): close login modal\n\nipcRenderer.on('close-login-modal', (event, message) => {\n\t\n\tmodal.close()\n})\n\n\n\n//note(@duncanmid): note menu commands\n\nipcRenderer.on('note', (event, message) => {\n\t\n\tlet selected = store.get( 'appInterface.selected' )\n\t\n\tswitch( message ) {\n\t\t\n\t\tcase 'new':\n\t\t\tapiCall( 'new', null, {\"content\": \"# New note\"} )\n\t\tbreak\n\t\t\n\t\tcase 'edit':\n\t\t\tif( selected ) editNote( selected )\n\t\tbreak\n\t\t\n\t\tcase 'save':\n\t\t\tif( selected ) saveNote( selected )\n\t\tbreak\n\t\t\n\t\tcase 'favorite':\n\t\t\tif( selected ) {\n\t\t\t\n\t\t\t\tlet favorite = ( $(`#sidebar li button[data-id=\"${selected}\"]`).attr('data-favorite') == 'true' ) ? false : true\n\t\t\t\n\t\t\t\tapiCall( 'update', selected, {\"favorite\": favorite} )\n\t\t\t}\n\t\tbreak\n\t\t\n\t\tcase 'export':\n\t\t\tif( selected ) apiCall( 'export', selected )\n\t\tbreak\n\t\t\n\t\tcase 'delete':\n\t\t\tif( selected ) deleteCheck( selected )\n\t\tbreak\n\t}\n})\n\n\n\n//note(@duncanmid): markdown menu commands\n\nipcRenderer.on('markdown', (event, message) => {\n\t\n\tif( !simplemde.isPreviewActive() ) {\n\t\t\n\t\tswitch( message ) {\n\t\t\t\n\t\t\tcase 'h1':\n\t\t\t\tsimplemde.toggleHeading1()\n\t\t\tbreak\n\t\t\tcase 'h2':\n\t\t\t\tsimplemde.toggleHeading2()\n\t\t\tbreak\n\t\t\tcase 'h3':\n\t\t\t\tsimplemde.toggleHeading3()\n\t\t\tbreak\n\t\t\tcase 'h4':\n\t\t\t\tsimplemde.toggleHeading4()\n\t\t\tbreak\n\t\t\tcase 'h5':\n\t\t\t\tsimplemde.toggleHeading5()\n\t\t\tbreak\n\t\t\tcase 'h6':\n\t\t\t\tsimplemde.toggleHeading6()\n\t\t\tbreak\n\t\t\tcase 'b':\n\t\t\t\tsimplemde.toggleBold()\n\t\t\tbreak\n\t\t\tcase 'i':\n\t\t\t\tsimplemde.toggleItalic()\n\t\t\tbreak\n\t\t\tcase 'del':\n\t\t\t\tsimplemde.toggleStrikethrough()\n\t\t\tbreak\n\t\t\tcase 'ul':\n\t\t\t\tsimplemde.toggleUnorderedList()\n\t\t\tbreak\n\t\t\tcase 'ol':\n\t\t\t\tsimplemde.toggleOrderedList()\n\t\t\tbreak\n\t\t\tcase 'a':\n\t\t\t\tsimplemde.drawLink()\n\t\t\tbreak\n\t\t\tcase 'img':\n\t\t\t\tsimplemde.drawImage()\n\t\t\tbreak\n\t\t\tcase 'code':\n\t\t\t\tsimplemde.toggleCodeBlock()\n\t\t\tbreak\n\t\t\tcase 'blockquote':\n\t\t\t\tsimplemde.toggleBlockquote()\n\t\t\tbreak\n\t\t\tcase 'table':\n\t\t\t\tsimplemde.drawTable()\n\t\t\tbreak\n\t\t\tcase 'hr':\n\t\t\t\tsimplemde.drawHorizontalRule()\n\t\t\tbreak\n\t\t}\n\t}\n})\n\n\n\n//note(@duncanmid): html submenu menu commands\n\nipcRenderer.on('html', (event, message) => {\n\t\n\t\n\tif( !simplemde.isPreviewActive() ) {\n\t\t\n\t\tswitch( message ) {\n\t\t\t\n\t\t\tcase 'small':\n\t\t\tcase 'sup':\n\t\t\tcase 'sub':\n\t\t\tcase 'u':\n\t\t\tcase 'mark':\n\t\t\t\twrapTextToSelection( `<${message}>`, `</${message}>` )\n\t\t\tbreak\n\t\t\tcase 'dl':\n\t\t\t\tinsertTextAtCursor(\n`<dl>\n\t<dt>title</dt>\n\t<dd>description</dd>\n\t<dt>title</dt>\n\t<dd>description</dd>\n</dl>` )\n\t\t\tbreak\n\t\t}\n\t}\n})\n\n\n//note(@duncanmid): view menu - zoom levels\n\nipcRenderer.on('set-zoom-level', (event, message) => {\n\t\n\tlet zoom = store.get( 'appSettings.zoom' )\n\t\n\tswitch( message ) {\n\t\t\n\t\tcase 1:\n\t\t\tzoom++\n\t\t\tif( zoom > 16 ) zoom = 16\n\t\tbreak\n\t\t\n\t\tcase -1:\n\t\t\tzoom--\n\t\t\tif( zoom < 4 ) zoom = 4\n\t\tbreak\n\t\t\n\t\tdefault:\n\t\t\tzoom = 10\n\t}\n\t\n\tstore.set( 'appSettings.zoom', zoom )\n\tapplyZoom( zoom )\n})\n\n\n\n//note(@duncanmid): context menu commanda\n\nipcRenderer.on('context-favorite', (event, message) => {\n\t\n\tlet favorite = ( message.favorite == 'true' ) ? false : true,\n\t\tid \t\t= message.id\n\t\n\tapiCall( 'update', id, {\"favorite\": favorite} )\n})\n\n\nipcRenderer.on('context-export', (event, id) => {\n\t\n\tapiCall( 'export', id )\n})\n\n\nipcRenderer.on('context-delete', (event, id) => {\n\t\n\tdeleteCheck( id )\n})\n\n\n\n//note(@duncanmid): on click sidebar button\n\n$('body').on('click', '#sidebar li button', function(event) {\n\t\n\tevent.stopPropagation()\n\t\n\tlet id = $(this).data('id')\n\t\n\t$('#time').html('')\n\t$('#note').html('<div class=\"loader\"></div>')\n\t\n\t$('#sidebar li button').removeClass('selected').removeClass('above-selected')\n\t$(this).addClass('selected').parent().prev().children().addClass('above-selected')\n\t\n\tapiCall( 'single', id )\n\t\n\tstore.set( 'appInterface.selected', id )\n})\n\n\n\n//note(@duncanmid): on right click sidebar button\n\n$('body').on('mouseup', '#sidebar li button', function(event) {\n\t\n\tevent.stopPropagation()\n\t\n\tlet data = {\n\t\t'id': $(this).data('id'),\n\t\t'title': $(this).data('title'),\n\t\t'favorite': $(this).attr('data-favorite')\n\t}\n\t\n\tif( event.which === 3 ) {\n\t\t\n\t\tipcRenderer.send('show-sidebar-menu', data )\n\t\treturn\n\t}\n})\n\n\n$('body').on('focus', '#sidebar li button', function(event) {\n\t\n\t$(this).parent().prev().children().addClass('above-selected')\n})\n\n\n$('body').on('focusout', '#sidebar li button', function(event) {\n\t\n\tif( !$(this).hasClass('selected') ) {\n\t\t\n\t\t$(this).parent().prev().children().removeClass('above-selected')\n\t}\n})\n\n\n\n//note(@duncanmid): on click empty sidebar\n\n$('body').on('mouseup', 'aside', function(event) {\n\t\n\tif( event.which === 3 ) {\n\t\n\t\tipcRenderer.send('show-sidebar-menu', null )\n\t}\n})\n\n\n\n//note(@duncanmid): open links in browser\n\n$('body').on('click', '.editor-preview a', (event) => {\n\t\n\tevent.preventDefault()\n\t\n\tlet link = event.target.href\n\t//todo(@duncanmid): scroll to #anchor links\n\tif( link.substr(0, 4) !== 'file' ) shell.openExternal(link)\n})\n\n\n\n//note(@duncanmid): docready\n\n$(document).ready(function() {\n\n\ttoggleSpellcheck( store.get('appSettings.spellcheck') )\n\t\n\tif( !server || !username || !password ) {\n\t\t\n\t\topenModal( 'file://' + __dirname + '/../html/login.html', 480, 180, false )\n\t\t\n\t} else {\n\t\t\n\t\tapiCall('all')\t\n\t}\n\t\n\t\n\t$('#edit').click(function() {\n\t\t\n\t\teditNote()\n\t})\n})\n"]}