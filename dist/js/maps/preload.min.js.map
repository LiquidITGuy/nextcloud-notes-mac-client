{"version":3,"sources":["preload.js"],"names":["remote","require","os","release","parts","split","color","systemPreferences","nativeTheme","setOSTheme","theme","shouldUseDarkColors","accent","getAccentColor","substr","light","lighten","hex","dark","darken","window","localStorage","os_theme","accent_light","accent_dark","__setTheme","subscribeNotification"],"mappings":"AAAA,aAIA,MAAMA,OAAEA,QAAYC,QAAS,YACvBC,GAAQD,QAAS,MAAOE,UACxBC,MAAUF,GAAGG,MAAO,KACpBC,MAAUL,QAAS,UACnBM,kBAAEA,mBAAsBP,QACxBQ,YAAEA,aAAgBR,OAGlBS,WAAa,KAElB,IAAIC,EAASF,YAAYG,oBAAsB,OAAS,QACvDC,EAAUL,kBAAkBM,iBAAiBC,OAAO,EAAG,GAEpDV,MAAM,IAAM,KAEfM,EAAQ,QACRE,EAAS,UAGV,IAAIG,EAAQT,MAAM,IAAIM,GAAQI,QAAQ,KAAKC,MACvCC,EAAOZ,MAAM,IAAIM,GAAQO,OAAO,MAAMF,MAE1CG,OAAOC,aAAaC,SAAWZ,EAC/BU,OAAOC,aAAaT,OAAS,IAAIA,IACjCQ,OAAOC,aAAaE,aAAeR,EACnCK,OAAOC,aAAaG,YAAcN,EAE9B,eAAgBE,QAEnBA,OAAOK,cAKTlB,kBAAkBmB,sBAEjB,yCACAjB,YAIDA","file":"../preload.min.js","sourcesContent":["'use strict'\n\n// based on: https://gist.github.com/EtienneLem/7e3bc7af2ed75a15eae9006557ef790e#file-preload-js\n\nconst { remote } \t= require( 'electron' )\nconst os \t\t\t= require( 'os' ).release()\nconst parts \t\t= os.split( '.' )\nconst color \t\t= require( 'color' )\nconst { systemPreferences } = remote\nconst { nativeTheme } = remote\n\n\nconst setOSTheme = () => {\n\t\n\tlet theme \t= nativeTheme.shouldUseDarkColors ? 'dark' : 'light',\n\t\taccent \t= systemPreferences.getAccentColor().substr(0, 6)\n\t\n\tif( parts[0] <= 17 ) { \n\t\t\n\t\ttheme = 'light'\n\t\taccent = '0a5fff'\n\t}\n\t\n\tlet light = color('#'+accent).lighten(.15).hex()\n\tlet dark = color('#'+accent).darken(.175).hex()\n\t\n\twindow.localStorage.os_theme = theme\n\twindow.localStorage.accent = `#${accent}`\n\twindow.localStorage.accent_light = light\n\twindow.localStorage.accent_dark = dark\n\n\tif ('__setTheme' in window) {\n\t\t\n\t\twindow.__setTheme()\n\t}\n}\n\n\nsystemPreferences.subscribeNotification(\n\t\n\t'AppleInterfaceThemeChangedNotification',\n\tsetOSTheme,\n)\n\n\nsetOSTheme()\n"]}