{"version":3,"sources":["version.js"],"names":["i18n","require","version","remote","app","getVersion","compareVersions","$","log","module","exports","appVersion","getJSON","release","latest","name","info","compare","displayVersion","t","includes","done","fail","jqXHR","textStatus","errorThrown","error","always","details","append","fadeIn"],"mappings":"AAAA,aAEA,MAAMA,KAAUC,QAAS,cACnBC,QAAaD,QAAQ,YAAYE,OAAOC,IAAIC,aAC5CC,gBAAkBL,QAAQ,oBAC1BM,EAAQN,QAAS,UACjBO,IAASP,QAAS,gBAGxBQ,OAAOC,QAAU,CAEhBC,WAAY,WAEXJ,EAAEK,QAAS,iFAAiF,SAAUC,GAErG,IAAIC,EAASD,EAAQE,KAErBP,IAAIQ,KAAM,iBAAiBd,WAC3BM,IAAIQ,KAAM,mBAAmBF,KAEzBR,gBAAgBW,QAASf,QAASY,EAAQ,MAE7CL,OAAOC,QAAQQ,eAAgB,6KAA6KJ,oCAAyCd,KAAKmB,EAAE,sBAAuB,8CAGhRb,gBAAgBW,QAASf,QAASY,EAAQ,OAEzCZ,QAAQkB,SAAS,MAEpBX,OAAOC,QAAQQ,eAAgB,yCAAyChB,kBAE7DA,QAAQkB,SAAS,MAE5BX,OAAOC,QAAQQ,eAAgB,yCAAyChB,kBAIxEO,OAAOC,QAAQQ,eAAgB,uCAAuChB,sBAIxEmB,MAAM,WAENb,IAAIQ,KAAM,8BAEVM,MAAM,SAAUC,EAAOC,EAAYC,GAEnCjB,IAAIkB,MAAO,wBAAwBF,QAEnCG,QAAQ,WAERnB,IAAIQ,KAAM,2BAIZE,eAAgB,SAAUU,GAEzBrB,EAAE,UAAUsB,OAAQD,GACpBrB,EAAE,WAAWuB,OAAQ","file":"../version.min.js","sourcesContent":["'use strict'\n\nconst i18n\t\t\t\t= require( './i18n.min' )\nconst version \t\t\t= require('electron').remote.app.getVersion()\nconst compareVersions\t= require('compare-versions')\nconst $\t\t\t\t\t= require( 'jquery' )\nconst log\t\t\t\t= require( 'electron-log' )\n\n\nmodule.exports = {\n\t\n\tappVersion: function() {\n\t\n\t\t$.getJSON( 'https://api.github.com/repos/dgmid/nextcloud-notes-mac-client/releases/latest', function( release ) {\n\t\t\t\n\t\t\tlet latest = release.name\n\t\t\t\n\t\t\tlog.info( `this version: ${version}` )\n\t\t\tlog.info( `latest version: ${latest}` )\n\t\t\t\n\t\t\tif( compareVersions.compare( version, latest, '<' ) ) {\n\t\t\t\t\n\t\t\t\tmodule.exports.displayVersion( `<button id=\"update\" class=\"fadein\" type=\"button\" tabindex=\"-1\" data-url=\"https://www.midwinter-dg.com/mac-apps/nextcloud-notes-client.html?app\"><span id=\"update-version\">${latest}</span> <span id=\"update-label\">${i18n.t('app:titlebar.update', 'Update Available')}</span> &rarr;</button>` )\n\t\t\t}\n\t\t\t\n\t\t\tif( compareVersions.compare( version, latest, '>' ) ) {\n\t\t\t\t\t\n\t\t\t\tif( version.includes('-a') ) {\n\t\t\t\t\t\n\t\t\t\t\tmodule.exports.displayVersion( `<span id=\"dev\" class=\"α fadein\">DEV: v${version}</span>` )\n\t\t\t\t\t\n\t\t\t\t} else if ( version.includes('-b') ) {\n\t\t\t\t\t\n\t\t\t\t\tmodule.exports.displayVersion( `<span id=\"dev\" class=\"β fadein\">DEV: v${version}</span>` )\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\tmodule.exports.displayVersion( `<span id=\"dev\" class=\"fadein\">DEV: v${version}</span>` )\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t.done( function() {\n\t\t\t\n\t\t\tlog.info( `check release succeeded` )\n\t\t})\n\t\t.fail( function( jqXHR, textStatus, errorThrown ) {\n\t\t\t\n\t\t\tlog.error( `check release failed ${textStatus}` )\n\t\t})\n\t\t.always( function() {\n\t\t\t\n\t\t\tlog.info( `check release ended` )\n\t\t})\n\t},\n\t\n\tdisplayVersion: function( details ) {\n\t\t\n\t\t$('header').append( details )\n\t\t$('.fadein').fadeIn( 'slow' )\n\t}\n}\n"]}