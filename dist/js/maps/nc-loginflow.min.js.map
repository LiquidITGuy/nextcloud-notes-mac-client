{"version":3,"sources":["nc-loginflow.js"],"names":["i18n","require","Store","store","server","get","$","loginFlow","theserver","webview","document","createElement","setAttribute","body","appendChild","loadPage","loadURL","userAgent","extraHeaders","removeEventListener","addEventListener","attr","language","ready"],"mappings":"AAAA,aAEA,MAAMA,KAAOC,QAAS,cAChBC,MAAQD,QAAS,kBACjBE,MAAQ,IAAID,MAEZE,OAASD,MAAME,IAAK,2BACpBC,EAAIL,QAAS,UAQnB,SAASM,UAAWC,GAEnB,MAAMC,EAAUC,SAASC,cAAc,WAEvCF,EAAQG,aAAc,MAAO,KAC7BF,SAASG,KAAKC,YAAYL,GAE1B,MAAMM,EAAW,KAEhBN,EAAQO,QAEPR,EAAY,wBAAyB,CAEpCS,UAAW,yCACXC,aAAc,yBAIhBT,EAAQU,oBAAoB,YAAaJ,IAG1CN,EAAQW,iBAAiB,YAAaL,GAzBvCT,EAAE,QAAQe,KAAK,OAAQrB,KAAKsB,UA8B5BhB,EAAEI,UAAUa,OAAM,WAEjBhB,UAAWH","file":"../nc-loginflow.min.js","sourcesContent":["'use strict'\n\nconst i18n = require( './i18n.min' )\nconst Store = require( 'electron-store' )\nconst store = new Store()\n\nconst server = store.get( 'loginCredentials.server' )\nconst $ = require( 'jquery' )\n\n\n\n$('html').attr('lang', i18n.language)\n\n//note(@duncanmid): open loginflow webview\n\nfunction loginFlow( theserver ) {\n\t\n\tconst webview = document.createElement(\"webview\")\n\t\n\twebview.setAttribute( 'src', '/' )\n\tdocument.body.appendChild(webview)\n\t\n\tconst loadPage = () => {\n\t\t\n\t\twebview.loadURL(\n\t\n\t\t\ttheserver + '/index.php/login/flow', {\n\t\n\t\t\t\tuserAgent: 'Nextcloud Bookmark Manager - Macintosh',\n\t\t\t\textraHeaders: 'OCS-APIRequest: true' \t\n\t\t\t}\n\t\t)\n\t\t\n\t\twebview.removeEventListener('dom-ready', loadPage)\n\t}\n\t\n\twebview.addEventListener('dom-ready', loadPage)\n}\n\n\n\n$(document).ready(function() {\n\t\n\tloginFlow( server )\n})\n"]}